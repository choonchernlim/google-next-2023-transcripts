{
    "title": "Identity Federation on Google Cloud with Goldman Sachs",
    "presentation_type": "Breakout",
    "categories": [
        "Security Professionals",
        "SEC300"
    ],
    "video_id": "vTREgPtu8-k",
    "time": "Aug 29 04:45 PM - 05:30 PM CDT",
    "transcript": "foreign[Music]for those here in attendance goodafternoon for those are going to watchthis online later hello my name isStephen capred and I'll do someintroductions in a second but uh thissession specifically we'll be discussingGoogle identity Federation services andin conjunction we have Goldman Sachspresenting with us and I think that'sobviously the bulk of the session interms of understanding how governmentsex has leverage these uh thesecapabilities so it's the most excitingpart of this presentationso as I mentioned my name's Stephen I'ma product manager at Google and theidentity team specifically looking atWorkforce identity Federation and I'llbe joined by Sean who's the productmanager for workload identity Federationand then as I say the most exciting partrovi who's both our boss so make sureyou give us good reviews please but Robis the the group PM for for identity atGoogle cloud and you'll be interviewingTate from Goldman Sachs so it'll beinteresting to understand exactly howthey would leverage these two twocapabilities in their environmentso this is Jump straight in terms ofidentity and just a level set initiallyso Google has quite a broad breadth ofidentity capabilities so as you can seefrom the slider if I don't get in yourway in terms of everything from cloudidentity in terms of our native identitycapability for customers looking toprovision identities within Google andthen moving looking at simply Federationcapabilities is Workforce identityFederation and then as obviouslyidentity is expanding and maturing oneof the key elements of of that isobviously the certificates so Sean willbe covering off in terms of workloadidentity Federation and certificatemanagement specifically and given someinsights there and then lastly in thisfold as well is obviously a cloud acustomer identity so this is the thespectrum of services we have availableso today we'll be focusing onspecifically workload and Workforceidentity Federation so obviously being aPM for this product my responsibility toto cover off on workloadperfect so just to level set again as Isay in terms of cloud identity existingcapability and Cloud identity isutilized by customers today withinutilizing uh or using Google Cloudum and as I mentioned you can provisionthose identities directly or as mostEnterprise customers do with an existingthird-party IDP like octo or activedirectory or Ping Identity and othersthey Federate into Google cloud and thishas some onerous management requirementsin terms of having to map my activedirectory user to a Google user tounlock and be able to consume Googlecloud services but is obviously widelyused capability today and obviously hasgood use casesWorkforce and Indian Federation isspecifically providing a dedicatedFederation capability and provides thisin a simplest manner so let's see interms of a little bit more detail whatthat means so as you can see from thisslide here sorry I was told not to gopast the so as you can see from theslide here in terms of a customer isable to utilize that third-party IDPthere's specific claims or attributesdepending on your IDP in terms ofinformation or metadata about thatspecific user there can be entitlementsin terms of escalating somebody to aspecific group for example but customersare looking to simplify or at least takeadvantage of the Investments they'vemade in the identity solution so lookingfor consolidation they're looking tosimplify this identity lifecyclemanagement and take advantage of thatcapability and not have to duplicate itto take advantages of service providerofferings like Google Cloud obviously sothe idea being is I can look at theclaims or the attributes for thatspecific user and I can make accessdecisions through Google Cloud utilizingthat information so very simply a usercould log on to the IDP still takingadvantages of things like multi-factorauthentication or password lists somaking sure the rigorous protection oror policies that have been put in placecan still be recognized and still beleveraged but once that user hasauthenticated that specific token thatis given to that user can be passed youto Google Cloud obviously with aprovision that initial Federationconfiguration was set up be it ordc orSamo for example but once they're set upthat token can be interrogated forspecific claims it could be anythingfrom an obvious group would be anobvious one so a group contained in theIDP it could be a resource center it maybe the email address of the userwhatever information you want to sendthrough in episode token it can beinterrogated in an IM access policydecision can be can leverage theirspecific claim to provide access so inthis mechanism it means it's synclessand therefore very fast so we move awayfrom the I added somebody to a group Ineed to wait for that synchronization tooccurum I deleted somebody from a group andthey still have access all these type ofadministration concerns or cons orconstraints can be overcome by speakingdirectly to the source as I say thesimplification of the identity mechanismand leveraging that for all accesspolicy decisions so if you saw thesession this morning there was a gooddemo of setting up that initialenvironment but within a few minutes anda few configuration settings that can beprovisioned that your users can getaccess so obviously LeapFrogs you knowonboarding LeapFrog access to the systemand obviously it makes it a lot a lotsimpler so what we have in terms ofthe typical use cases obvious ones asI've mentioned and just in terms ofgetting access but where are we seeingfrom customer feedback how they see thisbeing beneficial so the first one as youcan see in terms of single sign-on therequirement here is in terms of I wantto make sure that my users can use thesame credentials as they do to log on totheir laptops for example and get accessI want to make sure that can be done ina very simplified manner so what I'vejust detailed in terms of that easy orconfiguration but also in terms of whatwe're seeing for customers is they maynot even if they're using Cloud identitythey may not have provisioned all oftheir users they may have Precisionprovision for example data Engineers sothey only set a certain subset thatthey've they've obviously synchronizedthrough to Google via Cloud identity andnow looking atproliferation of data they potentiallywant to provide bigquery insights tousers so in their organization sotraditionally they would have to now gothrough a synchronization exercise forthose users but by utilizing Workforceidentity iteration they can supplementthe existing environment and just sothat Workforce or the inflation forthose specific users and this uhscenario is similar to what governmentsex has done which uh takeable woulddetail a little bit laterthen in terms of customers also lookingin terms of potentially they knew orthey've already provisioned Cloudidentity as I say but they're looking atuh business partners it may be anacquisition it may be in terms of as Isay a business partner or supplier andagain if I use the bigquery example orGCS for example but in terms of thisassets that they want to make itavailable to another Enterprise anotherorganization again traditionally justhopping on this point they would have togo through this whole synchronizationand setup capability now with Workforceattending Federation in a matter ofminutes they can make sure that they'renot responsible for password resets andthings like that that can still becontained managed by the businesspartners IDP but they can control accessauthorized access to specific resourcesand turn that on and off so obviouslyreally expanding the ease of access toresources but still doing so in a verysecure Manner and then the last onepretty self-explanatory from aregulatory perspective customers thatare looking to make sure they cancontain resources and identities toPacific region for both you knowgeographical isolation or regulatoryfrom an industry perspective making surethat can be addressed as well so thoseare some of the common ones we seethen just in terms of some updates welaunched this product Workforceidentifiation or this capabilityum beginning of this year but already weare providing new capabilities orexpanding on that platform so I'mknocking everybody over here with mywith my presentation but in terms of sowhen we initially launched we had asubset of GC or Google cloud servicesthat were supported already we've goneup to 76 services or currently supportedso making sure that we get everythingfrom Google spanner gke GCE for examplewhich is obviously a very commonlyrequested service now has GA supports uhbigquery all these type of services nowcan be consumed or accessed viaWorkforce identity Federation so hugestrias in terms of making sure we makethe whole platform available tocustomers then just in terms of lookingat the platform itself as you can seeordc browser-based and saml tokenencryption so very simply in terms ofthe oidc is making sure that we have anEssence a back channel so we receivedthe initial token but we have a backchannel to the P to get more informationwhy is this important it's more securebut also allows us to capture moreattributes so I made mention in terms ofwe're making all our access decisionsbased on those attributes the moreattributes we can receive the Richerexperience you can give in terms of moregranularity in terms of those excessdecisions like number of groups forexamplebrowser-based sign-in you saw obviouslyearlier we support both API CLI andobviously console but if you are usingCLI we have an interactive experiencenow we popped up a browser type in yourpassword for your third-party IDP andprovision that access so much more moreinteractive capability and then lastlysame old token encryption just makingsure in terms of utilizing the thepublic key whether it says IDPcertificate making sure allCommunications is done so securely sopoint B here is we just keep oninvolving the platform to make sure he'staking advantage of of Standards to makesure you're getting the most securecapability possiblethen just in terms of looking at ourroadmap as you can see in terms of uhsorry if I'm doing for this in terms ofconfig UI as I made mention at themoment you provision of our via commandline we're introducing the config UI andthen lastly I think just talking on interms of third-party app supports makingsure we're also addressing which is acommon use case of customers usingthird-party applications to access gcpservices and making sure this mechanismis also available to them so those isvscan register the applications to alsoutilize this authentication mechanismand then just as before I hand over toSean just looking at our futures iswe're looking for a richer RDPintegration so things like rtdr forexample making sure we have mechanismmechanisms whereby we can see thosesignals and either provide those backersinsights to you to allow your systems toutilize or do something about that ormaybe even initiate a Google managedresponses to those specific signals sowe're definitely looking for feedback onthat so any thoughts on that please comespeak to me afterwards and we'll belooking to see uh some some customersome information there so that'sWorkforce I'm going to hand over to Seanwho's going to cover off a workload foryouhello everyoneum my name is Sean and I'm going to betalking about workload identity atGoogle Cloudum so just now you heard from Stephen inthe world of Workforce identity there'sa lot of interest things going on now onthe workload side things are a littledifferent workload item is a veryinteresting because of two main traitsof workload identity the first one isbeing generally Enterprises have a lotof these identities in fact what we seeis that 85 percent and growing of acustomer's Enterprise environment areworkload identities and not humanidentities the reason for this isactually very simple in adesign you have a developer they come inthey might turn on multiple VMS mightturn on some serverless functions mightwrite some scripts and then tomorrowthey'll leave the company wasted all themoney but umonce all that is gone even though thedeveloper has left the company theseworkloads continue to operate and theseidentities continue to exist they stackup over time leading to a sprawl ofthese identitythe second trade for workload identityis that in general they have a lot morepermission than human identities you canvery easily say you know Bob and mycompany needs access to this specificbucket but in the case of workloadworkloads are normally performing taskson behalf of a few a few employeesmultiple employees or even all yourcustomers right in the case where youhave like a front-end website everyone'sgoing through that workload and becauseof that workloads generally have a lotmore permissions than humansbased on this it is super important forcustomers to really think about workloadideas and have a coherent strategy forthis type of identityworkload identity in two aspects firstof all we think about what kind of namefrom the scenarios of having workloadsauthenticated to Google Cloud apis soyou know this is the standard scenarioif you have some VMS that you spin upand those VMS need to access somebuckets that's the that's the scenariosimilarly if you have some workloadsthat are off of Google Cloud for exampleif you have terraform or GitHub andthose things need to develop resourcesintegrate with Google Cloud that's alsoan identity that needs to integrate withGoogle Cloudon the other side we're looking atto workload communicationtypical Enterprise deploymentstraditionally most customers are usingnetwork security and network perimeterto secure their workload to workloadcommunicationin the world of xero trust and we'realready doing this for human users wewant to do similar things on workloadside if you have a identity for each oneof your workload you're able to light upevery single identity within yournetwork you'll be able to audit themunderstand them and more importantlyyou'll be able to develop strongauthentication between these workloadsso you can say only workload a can talkto workload B you'll also be able to setup finer grain authorization policiesfor these workloads once these theseworkloads have an identityif we go a bit deeper into thecapabilities that are available todaymost customers are familiar with serviceaccounts so most gcp resources todayoperate by you creating a serviceaccount attach the service account tothe resource run the service accountaccess to the bucket or the uh thevertex AI service and you're after theracesif you happen to have workloads that arerunning not on a typical GCV but you'rerunning on gke specifically we have aproduct called gke workload identity gkeworkload identity enables you toFederate in your kubernetes serviceaccount and impersonate a Google cloudservice account to access Google cloudservices lastly very similar to TKAlocal identity we have workload identityFederation this is for your workloadswhich are outside of Google Cloud forexample we're closed hosted on Azure onAWS your CI CD pipelines or your on-premenvironment these workloads can generatenative oidc and Samo tokens a little bitlike the workforce identity Federationand be able to integrate with GoogleCloud to access Google cloud apis andservices you might have noticed that wedidn't really put service account keyson this page and this is the reason forthis is because we're seeingincreasingly a lot of our customers aremoving away from service account Keystowards workload Adena Federation you'lldefinitely hear a lot more about thatfrom Tate later when he goes into whatGoldman Sachs is doing in the Enterpriseenvironmentnow for workload to workloadcommunication we are now doing a lot ofwork in this area and today we supportuh the delivering smithy-basedidentities and certificates tokubernetes pods and Google willbasically auto rotate these podsidentity for you and so you don'tactually have to manage it similarly ifyou happen to have workloads which arehosted outside of Google Cloud we allowyou to Federate in those workloads forour certificate Authority service andgenerate specific identities andcertificates for those workloads as wellonce these certificates are embeddedyou're easily able to set up Mutual TLSbased authentication for these workloadsso that they can communicate with eachother using standard libraries likeEnvoy or grpc librariesnowI'm going to touch on some of the thingswhich we have been doing lately in theworkflow at any space soover the last few months we did a bunchof work mainly Focus around workflowediting Federation we are now supportingpublic idct upload so traditionallycustomers have to open up an httpsendpoint in order to do Federation butthis is not very useful for our highlyregulated customers as well as customersusing terraform Enterprise or GitHubEnterprise where these public oidcDiscovery endpoint is not possible toset up we now allow you to basicallyupload these securely to Google cloudand Google Cloud will manage it for youwe have also done a lot of work aroundour client libraries client library forworkload is just like the browser forhuman usersworkloads basically use these Cloudclient libraries to access Google cloudapis and serviceswe already support multiple languagesand we most recently we added supportfor Ruby and for c-sharp we also did alot of work to enable more seamlessintegration with on-prem environment andwe have an open source tool for you toset up Seamless connection with youractive directory and kerbero setup soit's kind of streamlining thatexperience finally we also deliveredservice count key expiry so if you havea lot of these long-lived serviceaccount Keys you can now set expirationtimes on them however I recommend you tobe very careful because when you set upexploration some of the developers onyour organization might not be used tothat and that might lead to outages inyour environment so you have to be verycareful before you turn on the switchlooking into the futureum there's a the things that we'refocusing onum gke workload identity and world clockand Federation today are two separateproducts we're looking at converging thetwo having a single IEM Syntax for bothof these type of workloads and also makethem together seamlessly into theplatform as part of this if any of youhave set this up we're getting rid ofthe service account impersonation stepas part of the Federation flow so a lotof customers struggle today with settingup Federation because they actually needto go create a separate service accountattach the service account so your GPAcalled identity and and all of that isvery hard to manage with this new updatethat's coming very soon but before theend of this year you'll be able todirectly assign your third partyidentities and your gke work identitiesdirectly to the resources streamline theprocess and you won't have to manage anextra identitywe'll be also doing a bunch of workaround spiffy identities today as Iexplained earlier we mainly focus onspiffy identities for gke environmentwe're looking at taking that out of ourtraffic director product expanding thatacross our Google Cloud platform andbeing able to support multiple types ofcompute instances whether it's VMS loadbalances serverless functions thesespecific identities will work seamlesslywithout networking products or productslike service mesh traffic director loadbalancer to deliver a very seamlessstreamlined experience for you to set upMutual TLS authentication it will alsogive you opportunity to set upauthorization policies as well for yourvarious workloadsfinally we're also adding the capabilityto integrate x509 certificates intoGoogle Cloud API through Federationtoday we only support oidc tokens andSamo tokens but soon you'll be able todeliver used certificates that you havealready deployed onto your workload toaccess Google Cloud apis as well justlike oidc and xaml tokens this is aspecially useful for customers who arerunning I iot devices as well ascustomers who have specific deploymentsalready in the on-prem environment inthe future we're looking at things likemulti-cloud attestation for workloadsand certificate management as well asfeatures around how we can help youmigrate away from service accounts andkeys to more secure environments andhave better governance story with thatI'm gonna now pass over the stage toTate and Ravi who's going to go moreinto exactly how Goldman Sachs is usingall of these capabilities which me andSteven just talked aboutthank you Seanso thank you everyone for joining and uhmyself I'm ravisha I'm the group productmanager for all identity products and wehave uh with us Tate from Kate raggyfrom Goldman Sachs who is actuallyputting all of these things that Seanand Stephen talked about to practice solet's let's hear more about how they'reactually uh using it but before thatplease tell us a little bit more aboutyourself and Goldman Sachs absolutelyum thanks Ravi uh my name is say um andI'm on the cloud enablement team atGoldman Sachs so I wanted to give aquick overview of Goldman Sachs beforediving into some of his use cases somost of you are probably at leastsomewhat familiar with our company butfor those that aren't uh we're a majorGlobal financial institution and whatthat means is we're providing a varietyof financial services to clients allaround the world includingindividuals as well as corporationsgovernments and even other financialinstitutionsum and we have a few different line ofbusiness which are highlighted there onthe screenumbut yeah the cloud enablement team whichis the team that I'm a member ofum we are responsible for managing thecloud platforms for Goldman Sachs uh soeven though we are Bank technology isreally kind of at the core of everythingthat we doum so in addition you know to staying upto date with the uh the most recentTechnologies such as public cloud andothersum security is a big concern for usworking in financial servicesum so we always put that first whenwe're working with technologyum to give some context on kind of ourCloud environment we do have a privateCloud we have our own data centersbut we're also heavy users of differentpublic cloud servicesum including gcp so to give a sense ofkind of our scale uh for gcp uh we're onthe order of hundreds of projects rightnowum but growing really rapidly so it's areally exciting place to beuhso with all of these different workloadsand services people connecting from alldifferent parts of our environmentumobviously making sure our app code worksand is like Cloud native is a part of itthere's certainly a lot of networkingpieces but identity is really criticaland so that's what we're going to gointo here in this session so we're usersof both Workforce and workload prettyheavily awesome thank you Jade for uhfor walking us through that so let's getinto it let's talk a little bit about uhworkload identity Federation I know youguys have been a pretty sophisticateduser of that if you could walk thisthrough your use case for workloadidentity Federation uh that would be agreat start absolutelyum so we have a team that is working onuh collecting logs and aggregating themin Google bigquery and using that to runuh different analysis and and queries onthose logs so we do have some of theseworkloads are running in gcp but they'realso running in our on-prem environmentsome of it is even running on otherCloud providers so I think for thissession and for this example of workloadwe're going to focus on those workloadsthat are running in other Cloudproviders and how do we get those logsfrom there into gcpum so yeah our goal is really to so thatthey can push them directly and using aservice account uh from the other cloudprovidersort of workload identity Federation howwould you have done it just uh just sowe can reset the audience in terms ofwhat you would have done otherwise yeahso identity Federation is critical herebecause without that we would be wewould have to use those long-runningtokens that Sean had mentionedum we and we'd have to copy and pastethose between Cloud providers and wereally wanted to uh have like ashort-lived token and Federate theaccess it's really a more secure way todo it awesome so let's get deeper if youcould walk us through sort of the flowof uh of how you use it absolutelyum so yeah we have kind of astep-by-step diagram there uh the firststep being that the workload willcontact the credential service on thecloud provider and it will get uh an IDtoken that proves its identitythen we're going to use our privateconnectivity over interconnected VPN andwe're going to make calls to gcp sofirstum our workload is going to call thesecurity token service or STS and it'sgoing to get an access token and so thisworks because a workload identity poolhas been created in the project thatestablishes that this external identityis trustednext it's going to call out to theservice account API and it'll get anaccess token for the service account andthis is a Google access token and so theservice account on the other cloudprovider has a workload identity userpermissions that have been granted andthat is what allows this so now that youhave that Google access token you canuse that to directly make those bigquerycalls and store the logsso if I were to summarize State uhbasically using workload ID Federationnow you did not have to use serviceaccount Keys didn't have to copy it toother clouds and didn't have to rotateright so looks like a pretty big victoryfor you absolutely and one other thingto mention so this is a pretty involvedprocess this is what's happening behindthe scenes but there are those clientlibraries that Sean had mentioned thatcan make that a lot simpler from theFrontline yeah that's a great Pointperfect so let's moving on I know you uhwe've been talking to you for quite sometime and you're very sophisticatedAdvanced users of workload identityFederation I understand that you havealso used it for workload to work loadcommunication if you could walk usthrough that use case that would beawesome excellent yeah so we haveanother use case we have a team that'srunning uh workloads both in gke andthen they have other workloads thatthey're running on premises and the goalhere is really to have securecommunication between those workloadsand to do that we're going to use mtosand so workload identity Federation isreally a critical part of making thatmtos establishing that mtos connectionnice so yeah let's let's dig deeper howhow did you go about it what are thepieces of Google Cloud did you actuallyuse in making it happen yeahum so as I mentioned workload identityFederation is used that's what enablesthat workload that's running on premisesto reach out to the certificateAuthority service and it has thepermissions to you know get thatcertificate signed the gcp workloads aregoing to do the same thing using thatgke workload identity Federation andthey're going to reach out to thecertificates Authority service so nowum all of these workloads have been havesigned certificates and then from therethe mtos connection can be initiatedfrom our on-premise workload we're usingthe grpc library through trafficdirector to do thatawesome so kind of maybe retraining someof the points that Sean had mentionedwhat this has allowed you to do is setup workload to workload securecommunication based on workload specificidentities which otherwise you wouldhave done based on sort of networkboundaries so this gives you more finalgrain control is that a fair uh Fair wayto put it definitely yep that's a hugeAdvantage here that's a huge Advantageawesome so great so um uh great to seein fact uh I would use this opportunityto talk a little bit about like some ofthe things we are doing to advance thisfurther we're going to make thiscapability part of the platform as wellso that it is much more easily availablefor other customers as well so if youhave questions uh talk to us later aboutthat as well happy to walk you throughit but going forward we talked about itthe work load identity Federation let'sswitch gears and talk about Workforceidentity Federation and if you couldtalk about your use case uh in in thatcase definitelyum so yes we're using Workforce identityFederation I almost did it thereum the goal for this solution was toallow both our human users and oursystem users to connect to bigquery fromour on-premise environmentas themselves with their existing GSidentities uh to run queries and analyzedata so that's the caveat there is wewant them to use their identities wedidn't want to set up a synchronizationprocess for either the identities or theentitlements as that was introducingsome administrative overhead and delaysthereum so yeah using Workforce we were ableto centralize those entitlements forthis application and some otherapplications the team had running onpremise great win there that's awesomeso yeah if you could help us walkthrough sort of maybe one layer deeperas to how how did you go about it stepby step so that others can benefitsure absolutely we can go kind of thesame flow so first our users will callour identity provider in our case that'sping Federate to get an identity tokenum and then ping Federate behind thescenes there that second step isactually connected with the entitlementsplatform and it's able to include theentitlements for the user with the tokenthat's being returned so next the youthe user is going to use the privateconnectivity flow again to call the STSAPI in this case it's calling theorganization level Workforce identitypool that we have and that returns aGoogle access token for that user thenthe user is able to make calls to thebigquery API using that token againstill as their on-prem identityhow that works is bigquery is seeingthat the user's principle has beenentitled to certain actions you candirectly entitle those on-premiseidentities and then go throughsuccessfullyawesome so take just to summarize oneone last time basically number one youdidn't have to sync the identities havea copy of those identities from Goldmanattacks into Google Cloud so you coulddo it shamelessly and number two allyour entitlements that were on yourpremise you could basically use themup-to-date entitlements were used youdidn't have to copy them as well so bothof them saved you a lot of uh time andtrouble absolutely yep yeah all right sothose are kind of the big pieces uh Iknow you have a demo for us would youwould uh do you mind sharing it with usabsolutely yep so yeah we have a quickdemo that's going to show how this wouldwork in a sample environmentall right so you can either use theprovider here and enter that what we'regoing to do if demo is actually use theuh just directly put in the address inthe address bar for for an SSO link soin this sample environment we have auser called demo oidc oneand that's going to uh it's a member ofa group called Next 23 and you can seethere in the demo we're adding thepermissions for this demo we're going touse just the basic owner permissions forthe project and we can search it therejust to verify that's gone throughum and so yeah we put in just the fullprinciple for that groupum and then we're going to go back tothe other window and we're going to login uh and we can see that after it loadsum just takes you know a couple secondshere we can see that the project accessgoes through successfully and we're ableto access itum so a key thing to note is that thegroup and the members are not storedanywhere in Google cloud and so you cansee in the token that we're passing inthere's the user and then there at thebottom uh you have the group membershipsand you can see next 23 is there and sobecause with Workforce identity it'strusting that that token that's comingfrom our identity provider is good forour service account which we have therejust highlighted so SDS sees this and itgrants our demo user the access for theprojectthat's awesome pretty pretty easy flowpretty quick to set up and uh I'm gladthank you for showing it for thecustomers so friends uh that's uh that'spretty much it for today"
}