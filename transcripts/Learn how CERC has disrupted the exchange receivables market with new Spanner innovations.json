{
    "title": "Learn how CERC has disrupted the exchange receivables market with new Spanner innovations",
    "presentation_type": "Breakout",
    "categories": [
        "Database Professionals",
        "DBS201"
    ],
    "video_id": "IQAy2H3fwp4",
    "time": "Aug 29 04:45 PM - 05:30 PM CDT",
    "transcript": "foreign[Music]to this session so we have a lot ofexciting announcements on spanner todayand in addition to that we are going totalk about Circ and how Circ disruptedThe Exchange receivables Market withspannerso before I do that let me introduce thepresenters to you my name is webhoGoogle I'm director of projectmanagement at Google I'm joined herewith Andre Silva who is the CIO of Circand then both of us are joined by pritamShah who is director of engineering inGooglewe have a packed agenda today so firstand foremost we are going to talk aboutsome of the recent enhancements inspanner a lot of new Innovations whichwe are bringing it and I'm going to walkyou through those uh second Andre isgoing to introduce to you uh give youall the details about exchangereceivables and you'll come out as anexpert in that because of Andre and lastbut not the least pritam is going totalk about the technical details of thesearch spanner use case and all thenuances which are associated with it atthe end of the session we expect to havesome time left for questions even afterthe session is over all three presenterswill be here in the room to answer anyquestions you may have about spanner oranything related to Circso let's dive right into it before Italk about the spanner Innovations forthose of you who don't know about Cloudspanner let me introduce it for you sospanner is a no compromise database itbrings best of both The Words which isnear unlimited scale with uh which ishorizontal scalability along with uh afull relational semantics for you andthis is a highly available database withfive lines of availability there is noconcept of any maintenance downtime oranything like thatI'm sure some of you know that inaddition to external customers spanneris used internally within Google topower a number of our billion plus userproducts and services so in terms ofscale spanner does more than 3 billionrequests per second and has more than 12exabytes of data under management whichis quite considerable considering it'san operational databasenow oftentimes when customers find outabout spanner they come to us and ask uswhere is spanner the right fit and basedon the experience we have working withcustomers we categorize spannerworkloads under these four categoriesso first and foremost it is fornon-relational workloads which needthose some extra capabilities whetherit's secondary indexes whether it'stransactions or in certain cases theyneed SQL supportsecond category is around scale means wejust talked about the scale at whichspan operates whether it'snon-relational database or relationaldatabase at extreme scales spanner is itfor you and it can be today or you wantto Future approve your application forthe future spanner is the right databasefor that and the third category is whenyou are running machine criticalworkloads whether you are in financialservices or retail and you want thatfive nines availability uh with thatstrong external consistency spanner isthe right database for that and last butnot the least uh a lot of customers havecome to us and said hey I'm runningthousands of my SQL instances orpostgres databases and from operationalstandpoint it's taxing so they want toconsolidate in one or two spannerinstances and save on operationaloverhead as well as on costnow going back on non-relational we havecustomers like sharechat who havemigrated from dynamodb onto spanner andrelease realized a lot of cost savingsas well as the extreme scale at whichspanner can operate taking example frommulti-regional we have customers likeDeutsche Bank who have built onlinebanking solution on spanner in factDeutsche Bank is speaking along with mycolleagues tomorrow and talking abouttheir online banking use case on spannerso please feel free to attend thesession as welllet's talk about Innovations so we atGoogleour goal is to provide best-in-classcapabilities which help you build yourapplications by leveraging theoperational data that is our goalwhenever we talk about development andthings like thatwe continue on focusing on enablingintelligence in spanner by bringing inthe power of AIML for your businessesand seconda lot of our customers come to us andsay they want to drive insights fromoperational data and for that we make itseamless for our customers to LeverageThe operational data to do analytics andthings like that and third our focus isalways on developer productivity and howwe can bring in capabilities which willmake it much easier for developers todevelop with spannernow coming back to intelligence werecently G8the vertex AI integration with spannernow you may ask how does it matter to meso imagine you are a retailer who isbuilding a payments application onspanner and as part of that paymentsapplication as you are doing thepayments you want to make sure that thisis a safe transaction and you want toenable all that via your developmentwith spanner it's extremely easy withvertex AI what you have to do is justregister your pre-trained machinelearning model from vertex AI intospanner and as part of your schema andas you are doing that paymenttransaction invoke that vertex AImachine learning model with thattransaction data and based on responsefrom vertex AI you can act accordinglywithin spanner if it's a safetransaction or not super easy to developin one single application and a lot ofour customers are using it I'llencourage you to give it a try as wellcontinuing on the intelligence themesometimes it can be cumbersome to writeSQL queries remember all the SQL syntaxwhich is there so to help the developerswe are bringing in the power of duet AIto spanner now I think if folks haveattended the keynote today there was alot of discussion on duet AI Brad Caldertalked about it as well so duet AI is aAI powered assistant it's availableeverywhere in gcp and to help you bemore efficient and effective at what youdo and with duet AI Parts spannerconsole experience what you can expectis you can just give it a naturallanguage prompt a simple prompt whereyou want it to write a query orsomething and as long as duet AI isenabled as as soon as you click on it itwill generate a SQL query for you somaking it extremely seamless extremelyeasy for you to develop a spanner thisis all available in preview today and aspart of the spanner Studio experience weare bringing some additionalcapabilities to you there's a dynamicobject Explorer which is shown on theleft of the screen over herewhere as you register new objectswhether it's tables views they will beautomatically populated extremelyefficient for you from navigationstandpoint as well as a new SQL editorwhere you can do all kinds of ddl dqlDML kind of query so extremely so easymaking it easy for you to usenow in addition to thinking aboutintelligence in the databases as Googlewe are focused on developing newtechnologies that enable user to makethe most use of their operational datanow let's think about what kind ofapplications typically run on spanner orany operational database for that matterso if you drive your attention to thisdiagram you definitely have yourtransactional application here then inaddition to that you might be doing someanalytical queries on top of youroperational data you might be exportingyour data from the operational databaseor you might be doing AIML batch queriesfor training purposes and things likethat now if you focus your attention onthis gray block over here which is thehigh level representation of spannerarchitecture all those queries gothrough spanner front end and thenLeverage The spanner back end theprovisioned CPU which you have done andwhich you are managing and we have fulldisaggregation of storage and computewith data being accessed from Colossusso in effect all your queries areactuallycompeting for the same Provisions CPUnow how do we solve for that how do wemake it seamless for you so without anyconcern you can do all kinds ofworkloads without having to impact yourtransactional applicationand this is where I'm super excited toannounce Cloud spanner data boost it's abreakthrough technology game changingtool in a lot of ways and what we havedone in spanner over multiple years iswe have developed a technology whichonce you as a developeryou enable data boost and what we'll bedoing is there'spre-provision compute managed by spanneras a service which is hot compute sothere is no startup time or anythinglike that we will automatically use thatcompute to access data which is sittingin classes so it's the freshest dataaccessjust based on a single button clickwhich you did and you we read thehottest data which is there withoutimpacting your provision compute now youmight be thinking why is it so gamechanging and how does it help meso there are multiple benefits for databoost first and foremost is workloadisolation so now without being concernedabout impacting your transactionalapplication you can do analyticalqueries or data export and everythingvia this data boost technology stillhave access to the most recent andup-to-date data but your transactionalapplication is not impacted second isabout performanceearlier you were constrained by theamount of provision compute or you areover provisioning just to accommodatefor some of these ad hoc kind of dataegress requests which you are receivingnow because we take care of thatprovisioning and everything because wewe do on-demand allocation of resourcesfor data boost you don't have to worryabout that so from an operationaloverhead perspective also it's uh isvery beneficial and all this at a veryoptimal cost because it's pay forexactly what you use data boost as aservice so we only bill you for duringthe time when this query is executingfor the resources which it consumes andlast but not the least by this time youwould have understood since there is nowa single copy of the data which you'llbe using for all kinds of workloadswhether it's analytics whether it'stransactional so you arehaving less of a challenge with datagovernance you are not setting upexpensive data pipelines or things likethat to make a copy of the database sofrom a data governance perspective it'smuch easy and seamless for you tooperate spannernow if you direct your attention to theslide on the top the chart so you cansee once a query was executing usingregular spanner it's consuming uhprovision CPU but as soon as it was doneusing data boost there is no impact onprovision CPUsame thing on the performance side inthis particular case it's saying a textperformance Improvement but internallydepends on the query we have seen muchbetter performance and much higherperformance gains with data boostfinally I like to drive your attentionto a developer productivity capabilitywhich we are announcing in GA today wethis is auto generated keys so now withauto generated keys in GA what you cando is you can just have the keys primarykeys to be Auto generated inside yourschema rather than in your applicationand we have designed auto-generated keysin such a way that it does not impactspanners scalability performance andreliability and the reason is spanner isa distributed database and as keys areAuto generated these are notmonotonically increasing primary Keysthese are randomly generated unique Keyswhether it's uid or integers and thisprevents hot spots and in addition toAuto generated Keys we areannouncing sequence integer support aswell which was a highly requestedcapability from a lot of our customersso something where developers can use itand can quickly enable it in even intheir existing applicationsand with this I like it I like to handit over to Andre to introduce suck to usthank youthank youso Syracuse our Brazilian fintech and weare innovating the use of the receivablein Brazil okay to better understand whatare receivables so we have here ideas soreceivables represents amount thatsomeone will receive in the futurethat's the main idea so we can't createreceivables by individuals so I willgive an example hereif you have a viewprovided by your company that providewater to your house you can pay laterthe bill so you can create a receivablein this situation butcompanies can create receivable betweeneach other so if you provide somethingany issue invoice the invoice can beused as a receivable in that casein Brazilthis Market is huge because everythingcan be used they are receivable thereand we started to study this Market in2015 and we applied for authorization tothe central bankum should try to organize this markedCentral Bank gave us authorization 2017and we started to work as a FMI so FMIyou can make a comparison between uhhere in U.S with New York Stock Exchangethey organize stocks we are doing thesame but we are organizedexchanges with receivablessohere you have a small landscape that weare working so we started to work withTrader repository or trade receiver wasin 2017. after we start to work withtime depositsafter loans and here we have aspecific situation with credit cardreceivablesso in Brazil if you pay a dinner foryour wife for example and the merchantjust will receive the amount 30 daysafter the transaction so we created areceivable in this situation I willexplore this user case later but afterthis we started to explore anotherbusiness like Insurance agribusinessreal estate receivable and now we areworking with tokens asset backendsecurity legal claims and our curiousreceivables here is all related to ageeverybody here is in this audience havea way to receive in the end of the weekon the end of the month so we areorganizing how this wage can be used asa receivable in this situationsohow the market was working before Circthe first step our receivable is createdbetween companies someone providesservice and create a receivable to to benegotiated so company presents thereceivable to a bankto ask about credit and now here we haveproblems because Banks start tounderstand moredata related to receivables but theydon't have data so they didn't know uhinformation about if there is thereceivable is available they didn't knowrelate informations about the behaviorof the receivable who is the real ownerof the receivable and we have a lot ofinformation on symmetry here in thatsituation what happens here so firstproblem frauds okay we have a lot offrauds in this situation but the mostimportant problem is rates so in Brazilyou have a high pressure rates in creditcard for for example you have more than100 percent of rates a year so it's agood Mark to the banks but for thecompanies it's not so good here butthey need money they make thetransactions and and Banks get thereceivable to use as a collateral heresocompanies expect to receive the amountin the future in the end of the lifecycle uhum Banks I expect to receive their moneybut in some case companies don't receivetheir money to pay so in this case Bankskin chargingcompanies to receive the moneyhow we are addressing this problem so weare splitted in three pillars the firstone we check if the receivable existsokay we have engine you call internallyaccess assessment and we provide a lotof information related to receivablesbehavior and we verify the existence ofthe receiver the second pillar isrelated to if the receiver is availablewe have internal database that controlevery situation about the receivablesand we provide this information to thebanks and the last part we have enginethat control the entire receivable lifecycle but life cycle but the mostimportant important part you relatedwith the money if the money will back tothe lender this part is importantbecause everybody that's lend moneyexpect to receive the money back so withthis we help them reduce the risk of theoperation heresohow the market is working now so thebeginning is the same they arereceivable is created andnow the second part is different becausethe receivable is registered at thatCirc and in this part circuit work as anotary here so imagine how manytransactions we receive about everyreceivables so everybodysend the information to us and afterthis their flow is the same companies uhpresents the receivable to a bank to getcredit but now you have two use casehere the step four is a little bitsimilar because Banks start tounderstand and more information aboutthe receivables but they ask to searchabout this information we provideinformation to the banks and after thisthey make the transactions but thesecond part is most important herebecausewe have every receivables here so Bankscontacted us directly received theinformation about if which receivable isavailable and Banks start to interactdirectly with the companies here andthey is make connections offeringcredits to them so the large key herenow is reverse becausethe companies can negotiate with thebanks more because they have more Banksoffering credits to them and we here weexpect to reduce the rates of thetransactions hereso after this uhthe banks lends money make thetransactions with uh lower rates hereand they expect to receive in thecorrect age in the end happens the lastmagic here because in the last day ofthe receivable life cycle their moneystarts to be tracking for us so we checkif the money receive the money back ifthey don't have money you try you try toget more guarantees for the operation soyou try to collect more collateral touse in this contract and of course ifyou found collateral we reduce the riskif we dot found a more collateral wesend information to bank make thecharging with more efficiency hereso to better understand more of ournumbers if you will sum up everyreceivable that we are working you willhave more than five trillion dollars inreceivable available to be negotiatedthat's the Brazilian Market that we areworking but now we are just working with700 billion dollars here so is our hugeopportunity here you can increase seventimes more uh just look in thesereceivables but as I said beforeeverything can be used as a receivableso you can explore more opportunitieswith other kinds of receivables but fornow we are just working this uhsituation heresothis is larger explainswhy we are here so incredible Market youhave a specific situation in credit cardwe have Merchants Brazil have more thanfour millimeters you have acquires 200acquires suppose the owner of the creditcard machine fmis competitors so weexchange information between us andBanks here more than 500 Banksum during the daytransactions happens betweenindividuals and Merchantsevery transactions that that happensacquires receive this information uhin the world during the day and duringthe night they send information to us sowe receive the information and weorganize this information our databasein the beginning of the day like is 6a.m we provide this information to thebanks here to the financial institutionsin the beginning of the the window 9 A.Mbetween 9 and 11 am the banks andMerchants start to negotiate correcthere so there is a lot of uhuh transactions should be negotiated ifwe multiply Merchants by acquires bycorrect Branch like this master typecorrect adapt by day and day here wehave two situationsthey can negotiate transactions thathappen the best but they also cannegotiate transactions that will happenin the futureso the banks by the future of thecompanies so specific situations butthere is a lot of transactions here ifyou multiply every situation here youhave more than 1.5 billion transactionsto process in a couple of hours here sowhen weyou start to start this we start tostudy our database because we had in thebeginning of this workflow a lot ofuncertainties related to this flow howthe market will worketc and we chose this spanner as I meandatabase so nowI will pass the floor to Brita and hewill help us to understand better ouruse case with technical details sothank youthank you weibo for highlightingspanners Innovations and thank you Andrefor educating us about Brazil'sreceivable market and the roles areplays as one of the most significantfmissoum the previous architecture that Circhad served its purpose but as the asthey got into the credit card receivablebusiness the volume of transactionsincreased at around the same time theregulations were changing so there was alot of ambiguity involved in it so notonly did they need an architecture thatwas designed for scale and performancebut also there to Future proof theirarchitecture so what I would like to dois I would like to walk you throughsearch business requirements and thentranslate them into technicalrequirements for their architectureso firstas Andre pointed out that Circ processesabout 80 percent of Brazil's credit cardreceivables and a major player in andthey're a major player in thereceivables marketso they needed a system that was highlyavailable available so no downtime nomaintenance windows and the SLA foravailability had to comply with the SLAthat was you know required by TheRegulatorssecond was scale and performance so wewill see in the next slides that sucksworkload is highly cyclical so thesystem and the architecture they adopthad to make sure that it works withcyclical workloads without compromisingon performance when it comes toPerformance they had to make sure thatthe database and the architecture theychoose would process up to150k transactions per second in thiscomplex architecture withoutcompromising on performance and againthey had to choose a database that wouldallow them to fire analytical queriesagainst operational data withoutcompromising on performancewe are talking aboutfinancial data so security was top ofmind they needed customer managedencryption keys they needed rpo0rt orzero they needed to take a daily backupslast but not the least they needed anoperational database which at very verylow overhead so the price performancewas very very importantso what let's take a look at theirarchitecture and see what thetransactional workflow which is theright workflow looks like and what doesthe read workflow looks like so what youwill see here is transaction i o that'slike the Gateway into Circ system and tothe left of the Gateway are all thesearch customers so these are credittakers payment processors lenders otherfmis all the interaction with the searchsystem is happening through transactionIOthe pub sub provides loose couplingbetween transaction i o and the rest ofthe system so that they can scaleindependentlyThe prioritizer Works hand in hand withmemory store to prioritize the incomingrequest according to business rules andalso order them and once that is donethe the request the transactions arepassed on to book data which is one ofthe most critical modules in the circsarchitecture the book data has thebusiness logic to process thesetransactions it runs on kubernetes itcan scale depending on the workload andit writes the data to spanner again herethe spanner serves as the source ofTruth and it stores all of searchtransactional registersso spanner is extremely critical toserk's business you will notice here bigthe use of bigquery twice that's becausethey wanted to store operational logsone of the requirements that they hadwas to ability to recreate anytransaction right so for purpose ofdebuggability the purpose of auditingyou want to be able to recreate atransaction so what happens here is thatbefore the transaction is processed theraw transaction is written in bigqueryand once that after the transaction isprocessed it is written again inbigquery so that way you can recreateyou can search you can debug anytransaction you want but remember thatspanner in this particular architectureserves as a source of Truth for all theregisters because we are going to carrythat to the next slide so now look atqueries the queries from the users cancome via two sources one it could be abatch request so you request queries inbatch the other one is ad hoc queriescomplex queries by a user portal boththese types of queries are served up bya via bigquery so bigquery can um youknow it has a lot of data which isjoined at bigquery and it serves up thein the previous slide we saw that thesource of Truth for all the resistancewas Cloud spanner so the cloud composerhere pulls the data from spanner andputs it in bigquery Cloud composer ismanaged Apache airflow for distributedjob management and it uses data boostwhich weibo talked about to get the dataout of spanner and put it in bigqueryso at Peak time during peak times thisis done 5 to 10 minutes every five toten minutes and during off-peak timesthey do it every hourso this is the way the queries areserved to the end customersnow Circ has a verycyclical workload so 9 to 11 am localtime is when they see the heaviesttraffic and on Mondays at around 9 00 amwe see Peaks on weekends there is verylittle traffic and sometimes when youlook at the graph the variation thedaily variation in the traffic is 10x sowhat it means is that you needelasticity from your database withoutcompromising on performance but thisalso means that you cannot just throwmore resources and over provision andthrow money at it so you really want asystem which is elastic but you shouldbe able to scale and pay for your actualusageso what I want to show you is whathappens when you scale a system likespanner up and down what is the impactof that on performance so if you seehere the x-axis is obviously thetimeline the y axis on the left is QPSin thousands the yellow line is the QPSso this is the incoming throughput andyou can see the surge in the incomingtransactional traffic and the blue lineis the number of nodes so the y-axis onthe right shows you the number of nodeso this is a classic case of Autoscaling right the traffic increases thenumber of node increases the trafficdecreases the number of nodes decreaseso no magic here but what I want to showis spanner is able to scale Up and Downbased on the demands of the system soyou are not over provisioning you arenot overplaying overpaying but what isphenomenal is the red line here this ismy proxy for a performance this is thelatency line so regardless of theincoming traffic search you can throw100 times more traffic the latent in theperformance remains steady and flat sothat was the impressive thing we noticedso in terms of volume total 300terabytes of data is stored in circsinstances the largest instance is 187terabytes the amount number of nodesvary from anywhere from 115 to 500 nodesand at Peak it's roughly around 100100K QPS or 100K transactions per secondand total in a day like Andre mentionedit's about 1.4 billion transactions adaywe about talked about data boost Ishowed it to you in couple ofarchitectural diagrams so just like theauto scaler I wanted to show you theimpact of running analytical queries onthe system on your oltp system so let mewalk Orient you a little bit so the topgraph is the throughput graph so this isthe this is an analytical query that isdone using data boost the y-axis here isthe amount of data that we are pullingout of spanner the bottom graph is theCPU so what I wanted to show you is thatat around 5 50 am when an analyticalquery was issued using data boostagainst your operational traffic whatwas the impact of taking this runningthis analytical query on CPUso the yellow and the blue line you seehere is actually this CPU because ofyour oltp and transactional traffic thered line which is pretty flat here isthe impact of running data boost so thetldr here is there was absolutely noimpact of running analytically heavyquery on your operational traffic rightso that was that was pretty amazing sonow let's take a look at what is theimpact of running data boost on yourlatency this was through our CPU sosimilarly the top graph Remains the Samebut I replace the bottom graph withlatency so y-axis is millisecond sametime same time frame we are running theanalytical query we are pulling out gigsof data but there is no impact to thetransactional latency so your businessbasically is unimpacted you can run anyamount of analytical query that you wantthis is a pretty amazing quote fromAndre who is the principal engineer atCirc he basically feels that data boosthas been a game changer for Circ itallows them to run analytical querieswithout compromising on cost orperformance so no more custom pipelinesno more duplication of data and no moretaking risks with your transactionalbusinessso what Circ has been able to do is theyhave been able to Future proof theirapplication and architecture byleveraging a transformational databaselike spanner that treats circ'srequirements as stable Stakesspanner has been better tested tested atGoogle scale it has a lot of veryInnovative and interesting featuresincluding AIML features one of whichweibo talked about we have a veryinteresting roadmap of things that weare going to launch soon and also lastbut not the least when I think of truecost of ownership it includesoperational costs licensing costHardware cost maintenance cost if youhave a maintenance window then there isloss of cost of lost opportunity so incirque's case because they are usingspanner their Opera their true cost ofownership is really awesome and they'revery happy about itwith that I'm gonna give it back toAndre to help us closethank youumso the solution was a game changer forus because we increased in clients a lotmore today we have more than 500 clientsactually clients here and how we saidbefore you are processing more thaneight percent of the credit cardtransactions in our system today and weare excited to use other Solutions inour platform the first one is theintegration with the vertex zi becauseyou can offer more uh analysis in realtime for our customers there and the endwe are built in the next generation ofour receivable platform here for nextyear we expect Increase five times moretransactions because we are exploringmore receivables and we havea lot of work to do with Google toreceive this information and of courseto provide more service with our clientsso now this session is over hereand we have here another sessionsrelated to respondent and database foryou explore during this journeyokay andis important for us receive the feedbackof this session so you can use the appand give you the information about thispresentation to improve uh for the nextyear"
}