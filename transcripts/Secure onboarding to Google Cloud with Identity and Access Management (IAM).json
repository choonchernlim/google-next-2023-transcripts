{
    "title": "Secure onboarding to Google Cloud with Identity and Access Management (IAM)",
    "presentation_type": "Breakout",
    "categories": [
        "Security Professionals",
        "SEC101"
    ],
    "video_id": "r0bdcgEyxic",
    "time": "Aug 29 02:15 PM - 03:00 PM CDT",
    "transcript": "foreign[Music]how's everybody doing are you okayyeah come on come onthank you thank you okayjust in case you're not sure where youare welcome to secure onboarding withGoogle Cloud using identity and accessmanagement here's your chance LastChance gone they're gonna lock the doorno I'm kiddingI'm Michelle chaburka I'm a cloudsecurity Advocate at Google cloud and Iam Elliot with two L's and two T's I'm ACloud security architect at Google Cloudthey only gave me 1lso this is an overview of what we'll bediscussing today but let's just JumpRight Inthe boundary ofis one of identitywhy is that so important this is aphilosophy statement about IAM right andit's because you're not going to be ableto create appropriate trust boundariesyou're not going to be able to actuallysecure your Cloud properly your Cloudinfrastructure without having a solididentity foundation and the reason whythat statement is really so important isbecause for old guys like you lie tomyself we remember the days when ourboundary was actually wherever we hadthe biggest beefiest firewall wherewherever our big beefy firewalls ourEdge routers and all that stuff thatused to be our boundary but it's nolonger wherever your your furthest mostremote worker is that is now yourboundary identity is now your boundaryespecially in the cloudso let's talk about I am in the cloudright well this is today's Focus sowe're going to focus here so when youlook at this this um slide I want you uhyou guys if you don't already have it onyour agenda try to find a session umManish raise your handAhmad raise your hand these guys work inour security foundations blueprint thisis part of what we talk about in thatblueprint all of these steps are thingsthat we believe that you need to do inorder to create a secure scalable andself-healing environment but the firstthree steps the first three steps aremost critical because the boundary isnow the identity so today in today'stalk we're going to focus on unifyingyour identity we're going to focus onestablishingum policy based on lease privilege usingIAM and then we're also going to talkabout setting up some guard rails aroundyour organ your entire organizationusing what we call organization policiesthose are the three things we're goingto talk about in that red circleMichelle says it's magenta I say redpotato potato but that's what we'regoing to focus yeah you're gonna get sosick of hearing the following phrasesleast privileged separation of Dutiesand defense in depth least privilegethere it is she's so many start countingokayumokay let's get started with what isidentity and access managementyeah I think I think I can I think Icould take this one okay so I did it inaccess management it really does itreally serves a great purpose because itanswers some vital questions that ourour users are going to ask of us ourpolicies are going to ask of us and mostof all our security systems will askthese three questions of us relative toIdentity it's going to want to know whowho can do what on which resources TheWho that can be a user it could be agroup or a service account that's thewho that is we're going to Define it alittle better later on then the what areroles and permissions what actions arethe are can the who actually do and thewhich is the organization or theorganization the folder the projects andthe resources these are the things thatthat you're going to be able to to dothese actions on who what and which Ineed to see you writing that downmemorize that memorize it there will bea test at the end okay let's cover theoperational scope of I amum what services depend on I am this isa trick questionall this and much more it's everythingeverything is dependent on IAM in Googlecloud in any cloudeverything depends on on I am so everyevery service in a cloud in the cloudall of these apis everything relies onIAM in fact IAM is one of those servicesin Google Cloud that we refer to as ahorizontal service what does that mean ahorizontal service means that all ofthese other services in Google Cloudthey rely on IAM in order for you toproperly leverage these Services if youwant to create a GCS bucket or if youwant to create an encryption key you'regoing to have to have the right IAMpermissions in order to do so now let'stalk about some of the first steps thisis may seem obvious but um know youridentities unify your identities whatdoes that mean so one of the firstthings going back to the the reddishmagenta-ish Circle I say red Michelleswears it's magenta but I think it's redthat circle on that first one of thefirst slides that we showed the veryfirst thing on there is to unify youridentity because most of our customersare coming to us either from an on-premworld or maybe even from another Cloudbut wherever you're coming to us fromyou already know you already have anestablished group of users that live insome system somewhere some ldapdirectory somewhere you have those usersalready located so this first step in insetting up and unifying your identitiesis critical because you need to makesure that you have a single source ofTruth for all of your identities youneed to know know that I have a CentralPrimary domain that is going to controlall of my actions in my organization asI'm moving forth and as I'm trying toset up this least privilege that we keeptalking so much about and we want tojust in case we want to create some typeof federation we're going to do thatright here as well so first step is whatunify your identities and this isanother important thing to rememberyou've actually got two consoles youhave the admin console right that'swhere the super admin account Worksum which is like the root account insome of our those other providers rightuh and that's where you'll initiallycreate admin accounts that's where youmanage groups and roles that's where youassign users to administrative groupsthat's where you enforce authenticationoptions for for users and you set upFederation and building a billing andthen you have the other console theother console is the is this is the thisis where you're going to roll up yoursleeves and you're going to get ready toget with it that's the cloud console butit was kind of confusing to me becausewhen I came to Google I've been atGoogle almost five years but when I cameto Google Cloud I had been a consultantfor a number of years supporting some ofthe other hyperscalers and and this wasa strange concept to me but the more themore I use it the more I understand thatfrom it's from its core Google is allabout security security that's built inand not baked on so what we what we havehere is we have a separation of theseduties the admin console is where you'regoing to set up these administrativerights and privilege and Federation andall that stuff but when you want tostart spinning up platform resourcesyou're going to go to the cloud consoleto do to do that the con the cloudconsole is where all of your your yourCloud resources will be provisioned andthe cloud console you need to rememberthat and if you look at the take us takea picture of that that's those are theURLs for the various consoles one thingI want to say before we go further aboutthe admin console is Michelle mentionedthe root account so in some clouds theyrefer to it as the root account we referto it in gcp as the super admin accountthat is not an account that you're goingto use for everyday AdministrationChris I know how badly you want to do itbut don't do it resist the temptation donot use that super admin account everyday and another point to rememberthe API is not enabled by default infact most Google apis are not enabled bydefault that seems kind of inconvenientwhy do you need to do that wellumit's a default closed approach that wehave and that's to protect you in termsof billing so you don't get billed forsomething that you didn't mean to turnon and it's also for security reasons sothat you don't enable things that you'renot aware that you have enabled right soremember it's default closed and bydefault the apis most of them aren'tenabled you can tell that Michelle spentmost of her career managing firewallscan't youme which is is the scaffolding rightbuilding the house the framework of IAMand my favorite topic is resourcehierarchies right and resourcehierarchies with resource manager rightso some of the things to consider whenyou're looking at and you're consideringyour resource hierarchy it providesattachment points for IAM and fororganization policies there's thisconcept of inheritance right so itstarts at the top and works down andthen projects and folders can be movedacross the hierarchy and at the lowestlevel resources are fundamentalcomponents that make that up right solet's look at this diagram right youhave your organization at the top andthen you have departments which arefolders and then you have teams that aresubfolders of the Departments and thenyou have prod and non-prod now thesethis resource hierarchy is yourAuditor's best friend it's a way for youto create Trust boundaries around inyour identities right that help youcreate trust boundaries around yourresources soum this is going to be a very goodself-documenting way to secure yourinfrastructure and to demonstrate thatyou've secured your infrastructure thinkabout PCI for example where you have youcan create a card holder dataenvironment versus your non-carcardholder data environmentand by the way just something nerdy thisis based on itu 1257 of IAM ontologiesand taxonomies I just thought I'd throwthat out there because I think that'ssuper nerdy that's super cool for me I'mgoing to slide over a little bit thatwas very nerdy and in case in case youwere falling asleep during that previousslideI actually uh put this into the contextof Lord of the Rings yay and um so Ibroke up the uh the kingdoms and thelands the continents into Lord of theRings so that you would understand thisuh a little better maybe it's a littleeasier to understand right and thebottom is the resource of the one ring Ithought this was super fun but maybeit's boring to you anywayyeahbut now let's talk let's talk somefoundational elementsbecause now that you built your houseit's time to move in the furniture so itwould be kind of weird to build a houseand you stand and start the moversactually move your your stove and yourrefrigerator into your living room sothat would be kind of weird wouldn't itit's the same with IAM it would be weirdto just start willy-nilly assigningresources and assigning users all thesewild permissions without knowing whatthey really need to do so one of thethings that we advocate for our usersall of our customers to do is to createwhat's called a Persona map Michelleasked the question I know you want toask the question uh what's a Personagood question glad you asked a Personais nothing more than a job function sowhen you think about creating leastprivilege you need to know what do youwho the users are that's going to be inthis system and you want to create anactual Matrix that lays out this is thisis Chris Chris is going to be adeveloper a developer needs this role soonce you do this Persona mapping now youhave something to go back to as yourusers have Azure systems begin to growand to expand you can always hearkenback to the days of your when youcreated this this Persona mapping todecide who should actually have whattype of access so personas and Personamapping is critical for you tounderstand how you can Implement leastprivilege in your environment yep yousaid itI got 10 more times to say it yeahokay and now elements and functions ofIAM so once you're in those so once youbuild your IAM our IAM relies on thesethree areas so these three elements sowe have a principle a principle is isgoing to be an entity that can access agiven set of resources now a principalblue can be a uh think of an end userit could be a service account or it caneven be a group that is your principle aprincipal can can do nothing until theprincipal has access or has permissionsand the permissions should not ever begranted directly to the end user so theroles are going to be the rose is that'sour collection of permissions that weare going to apply to a group based onour Persona mapping so the the role is acollection of permissions and thesepermissions determine what operationsare allowed to be carried out on aresource now I want you to remember thisthat when you grant a road to aprincipalI want to slow it down so you can hearthis when you grant a role to aprincipal you grant all the permissionsthat that role has when you grant a roadto a permission to when you grant a roadto a principal every permission that'sin that role the principal now hasaccess to and the third thing that wethat makes up I am is a policy the the apolicy is a collection of role bindingsand these role bindings allow they theyallow us to actually actually do stuffso you can only have one allow rowbinding perum per policy you can only have one butonce you assign these you need to makesure what you're getting into becausethis is what this is what how we'regoing to think about our least privilegeif I'm just starting if I don't knowwhat my personas are and I'm starting tocreate role uh these create theseallowed policies 10 months down the roadyou've forgotten what you did and noweverybody somebody has on some user'saccount and you didn't know what youdon't know why but it all goes back tothese three elements principles rolesand policies know what they areokay now the different types of I amrolls which include primitive predefinedand custom roles so A Primitive role isthis is this is a actually a throwbackthis is actually these roles actuallyum existed before there was even CloudIAM in Google these are some Legacyroles that were created to allow peopleto countkick the tires when they're moving intothe cloud but by default these rolls arevery they're overly permissive they'rethey're very very broad then these theseroles are owner editor and reader andthey're very very Broad in nature so butwe also have what's called pre-definedroles if you need if you don't want touse if you're thinking least privilegedwe have a set of predefined roles thatgive you finer grain Access Control theygive you much finer grain Access Controlthan basic roles and then our third roleis a custom role so let's say you createa a pub sub viewer role but you find outthat of of the of the permissions that'sin Pub sub viewer I don't want Chris tohave these last two permissions I wouldcreate a custom role based on thatpredefined role and now Chris can doeverything with this custom role exceptthese last two things so we started outwith Pub sub viewer but we stripped awaytwo permissions off of that and wecreated the custom role and so now thatis something that is more bespoke forour organization and where might that beuseful say you have multiple lines ofbusiness and you want to have that typeof role you use it and you Fork it somaybe you have say at sap you havesuccess factors and you have a Reba andyou have Concur and you want to separatethose Pub sub roles to each one thenit's self-documenting because you'vecopied a predefined role and it has whatdo you think I'm going to say leastprivilege yes least privilegeso remember how we talked about basic orprimitive roles are badwell here's why look at the number ofpermissions this is why we're sayingthat you really want to use predefinedor custom roles because look at thenumber of permissions over here you'retalking thousands eight thousand overeight thousand over seven thousand andthirty five hundred right but then youlook at the predefined roles way lessway way lessso let's talk to some security guardrails right defense in depth security islike an onion that's why it makes youcry but what you're doing is you'regoing from the inside out with defenseand depth right so you're going to use acombination of I am allow policies I amdeny policies and also organizationpolicies and the way you can refinethese you're going to use your policyintelligence Suite which is going tohelp you identify how you can nail thosedown right how you can get them reallytightso Michelle started out in her in in theprevious slide talking about defense indepth and most of the time when we thinkabout IAM we don't really think aboutthe fact that we think about securitywrit large as a defense in-depthum approach that's the best way toapproach it but in IAM we even havedefense in depth with I am and so thefirst thing we'll talk about are theseallowed policies and these allowpolicies I spoke about it earlier thisis a collection of role bindings and themetadata that you would assign to inactualum that you that says what a person oran entity will be allowed to do now themain thing I want to mention here aboutour policies whether it's allow deny ororg policies is that our policies allGoogle policies are what's calledeventually consistentlet me let that soak ineventual consistency means that when youmake a change when you implement achange whether via an allowed policy adenial policy or an org policy thosechanges may not be readily availableimmediately when you make the changebecause especially depending on the sizeof the organization there may be you mayneed to allow sufficient time for thechanges to propagate throughout theorganization so remember that all of ourpolicies allow deny and org policies arewhat eventually consistent don't beimpatient like Michelle Michelle's veryeducation very impatient and then wehave deny policies and you're probablythinking to yourselfdo we need deny policies we have allowedpolicies and it's going to stillevaluate it and deny access well Elliotmy friend Elliot here has a really goodexpression he says that a deny policy islike a scalpel and it really is and I'llgive you an example of that but look atthe order of operations first you'llnotice that denied rules are checkedfirst just like a firewall just like afirewall just like a firewall rightbecause it's fast so it's a deny exitsright but the important thing toremember here is that you will havesituations maybe uh here's an exampleyou have a probationary period for cloudEngineers or platform Engineers rightand you don't want to give that personyou want them to be able to do their jobbut you don't want to give them accessto production until that probationaryperiod is over you could use a denypolicy with you know a tag which is akey value pair that says Pro you knowstatus equals probation and then justfor that period you could haveautomation that comes in and takes thatoff takes that status off of that personand for this reason you know then youcan protect your environment a littlebit more right from you know people whoare newer and still getting you knowattuned to the environment so that theydon't have any whoopsies and yes that isa technical term having a whoopsie in aproduction environmentbut let's talk about organizationpolicies and what they actually are sothe so if a denied policy is a scalpel Ithink that an org policy can be more ofa blunt instrument because it applieseverywhere in the organization where youapply it in the resource in the resourcehierarchy our org policies operate onthe principle of what was called aconstraint a constraint is basically atemplate of of actions that are of thatum basically these are templates thatthese are actions that constrain orrestrict what a principle is allowed todo so for example in our in Michelle'sfictitious world of Lord of the Ringseveryone in Middle Earth has access tothe the precious the ring but assumingthat's there's someone in Middle Earththat has a body in land of the Sun thatwants to give they want to give someoneland of the sun access to the preciousthe ring right but now Elliot comesalong and said hey no Michelle that'snot cool I don't want anyone from Landof the sun to act says our Vitalresources in Middle Earth we canImplement an org policy constraint thatI'm going to show you now let's go tothe next screen yeah and just uh just areminder thatI am deny and allow policies or the whowork policies are the what rightand so now if you look at this veryfirst constraint these are we're onlyshowing you we have over 250um predefined constraints in gcp but Ijust want to talk about the first onehere so I don't want anyone from Land ofthe sun access and middle um MiddleEarth Resources so if I implement thisconstraint called domain restrictedsharing what that does is that preventsanyone outside of your organization fromgetting access to from logging into yourconsole or from doing anything Cloudrelated in your environment domainrestricted sharing is a very verycritical constraint to memorize andhere's some others that we've listedhere for example if you don't want tocreate a service account key which isbad you can Implement that particularconstraint there as well spoilerwe've got a demo coming up but on thattopic but just a quick uh overview ofwhat service accounts areum if people aren't familiar with thosethey're non-human identities rightthey're not interactive accounts thatyou use you know for an application or avirtual machine their projects specificbut they can be granted access to otherprojectsum they can be associated with a keypair okay not our favorite thing but yesthey can be associated with a key pairand you want to try to avoid assigningIAM users a service account or tokenCreator role but we're going to talkabout that well Elliot is nowso here's a demoohhe broke it I broke the demoI know they have spoken and they areangrythe demo gods are angryit's trying no it's playing but we justwe just need uh to if the control Boothcan give us some volume[Music]they're getting music it's not meso soI can't hear itit's playing now just give some volumethis is where Elliot does hisinterpretive dance of I amso so what so I'll talk through it sowhat was so what we're showing here iswe're creating a demo I created thisdemo to to show us org policies andservice account key creation soum in this environment we you have tofirst create a an org policy and makesure that you have you're at theappropriate level in the resourcehierarchy if because you can apply an orpolicy constraint at the org level atthe folder level or at the project levelso you want to make sure that you'reyou're applying the constraint at theappropriate level if I wanted to beorganization-wide guess what I want toput it at the organization level if Ionly wanted to be at the folder orproject level I will apply thatconstraint at that appropriate level soin this example one of the things that II've that I don't want to do is I don'twant any of our users to create aservice account key so what I'm going todo is I'm going to create a constraintand I'm going to make sure see right nowyou see that it's not enforced so whatI'm going to do is Click manage policyI'm going to go down and I'm going toenforce this policy I'm going to makesure that it's enforced I'm going toclick done and I'm going to accept thatpolicy and now you'll see that it's nowenforced and so now when I go to try tocreate a service account I'm going tocreate a service account and I'm goingto attempt to create a service accountkeyif the demo guards are smiling on Elliottoday in this pre-recorded video thenthen what should happen What shouldhappen is that the service account keycreation will failand and I promise you there is soundthat goes there is audio and it's abeautiful soundtrack it's a beautifulMelody that I wrote that accompaniesthis particular demo but I'm justcreating a basic um a basic serviceaccount just giving it a basic role andafter I've given it a basic role I thinkI'm giving it something likeum ownerI kid I kid I'm giving it a viewer rollso I'm going to create a uh create aservice account uh assign a you want tomake sure that when you create a serviceaccount that you give it a naming followa naming convention and then that youalso that you also um only apply therole that you want that service accountto have you want to make sure that yourestrict that service account and thereason why this is important is becausea lot of customers are calling uscomplaining about hey I'm seeing I'mauditing my accounts now and I seeeditor everywhere I didn't create all ofthese editors but you didn't create alot of editors but what you did do isyou use the default compute engineservice account right and the defaultcompute engine service account has theeditor role and so as you can see it'sprivilege I just tried to do it and itfailed because the um well it's now I'mgoing to create my key I'm creating mykey make sure of Json typegonna click createBoom Service account key creation isdisabled come on come on yay Elliott'sdemo Elliott demo worked yeah yes demowork and so that is that for the demothere we go okay let's talk some bestpracticesthank youwhy is this not moving out flickerah there we gosome Deuce do create principles thatImplement uh least privilege the theprinciples of least privilege andseparation of Duties right that's whatit's there for do rotate any serviceaccount Keys created I mean we don'tlike them but if you if you are going touse them then make sure you rotate themmake sure your service accounts don'thave admin privileges uh clearly editorthe default editor role is too much douse conditional roll bindings to Granttemporary elevated access that expiresimmediately if you want to Grantsomebody access to Pride then thatshould be temporary if it's notsomething they stand or they need as asa standard part of their job right doGrant privileged access on ajust-in-time basis where possible if youneed to give somebody access to aproduction environment or applicationyou know who has a support role fromoutside your organization there's areason that you want to do it on ajust-in-time basis and then do use MFAfor non-service accountsit's just not working the clicker failedus the clicker has failed so what'shappening today the clicker has failedso so what are some don'ts so don't useservice account Keys unless absolutelynecessary if you guys haven't alreadychecked it on your on your agenda lookat the session on workload identityfederations if you need to um externalaccess into gcpum workload identity Federation providesa very very seamless way to do that youcan still leverage service account butyou don't have to use these peskyservice account keys so don't useservice account Keys unless absolutelynecessary don't use the Primitive orbasic rolesespecially in production because theyare very very overly permissive you wantto use your predefined and your customroles don't think that you can just setit and forget it with your IAM that thisis something that my good friendMichelle a phrase that she used and I'vestolen it from her she'll never get itback but don't think that with I am youcan just set it and forget it that is alegacy mindset that we referred to myfriend Ahmad and I referred to as a petsversus cattle mindset thinking you canjust set it and forget it you don't wantto do that don't put service accountkeys in your Cloud functions your coderepos don't put it anywhere in your codeyour Cloud function variables because itwill get found and the bad guy will useit and finally don't apply org policyconstraints without do not apply orgpolicy constraints in production withoutproper tests properly testing them outfirst yesokay now the fun part troubleshootingyayover here right so you want to attainleast privilege right so how do you dothat you need to make sure that accessis appropriate to your business needswhat's safe to remove I don'tum what users will what what will theyneed in the future what's recommendedhow do you have it get a goodunderstanding of risk I had so much it'sso much what do I do Elliot oh I havethe policy intelligence Suite look atthat you have I am recommenderum this each role recommendationsuggests what you remove or replacethat gives principles you know that if aprincipal has access permission so youcan take it away right but you need 90days of data to do this you have policyanalyzer which is your Auditor's bestfriend your security professional's bestfriend right it can look and you candetermine who has what permissions youhave policy simulator which will showyou the impact that a change will havethat is awesome right and then you havepolicy troubleshooter which you knowsome developer comes to you and they'relike I can't get to this bucket I can'tdo this why not fix it fix it fix it andthis helps you do thatokay first this is a screenshot justthese are screenshots from I amrecommender again it needs 90 days ofdata but you get an idea you get an ideaof what it's going to look like rightthe red is obviously what's notrecommended rightand so so with recommender andrecommender is is great because we'retalking about least privilege right andyou've done your your persona mapping atthe beginning before you startedcreating all of these um user accountsand groups and all that stuff so you'vecreated your your persona Matrix yourpersona mapping and now you look at itand you you find out that Eli is stilloverly permissive on the role that we'vegiven him so with with policy and withwith uh with uh with bro withrecommender with 90 days of data we getwe get AI enabled ability to look atthis and find and tell us that of theseof the roles that he has he's not usingall of these other permissions so we canremove those permissions and we canactually create a more specificum role based on what recommender is ishighlighting here for us so recommenderis great for thatclicker working again no it's notworking there you go there we go andhere's I am Posse analyzer which is justa set ofuploaded queries we're not going tospend too much time on some of thesebecause we have another one beautifulElliott demo let's get to that demohere's policy simulator some sides fromthat so you'll see again you're justit's doing a dry run okayagain more policy simulator you'll seeit's actually telling you what it'sgoing to changeand finally uh policy troubleshooter butyou're going to see a demo on this goahead and like let's just skip to theyeah yeah here's a great demo and you'llprobably have to talk through this oneas wellokaythat's okay if you don't like Elliot'svoicetake a look at a couple of these toolsin action first we'll take a look atpolicy troubleshooting with policytroubleshooter we can you just simplyput in the pressure that's mewhat is the resource that this principleis trying to access and for thisdemonstration we'll access a GCS bucketyou can find the full resource names atthis particular page here on on GoogleCloud docs so I'm going to put in copyand paste this particular resource nameand then all I'll need to do is to addin the my bucket ID which I happen toknow what it isand then once that is is correct and inthere I can check and see if thisparticularresourceI'll check accessand voila access is granted which meansthat this particular principle canaccess this resource with thispermission this resource can do astorage bucket update and that's becausethere is no denied policy in effect andthere is a loud policy which whichgrants this access so this access hasbeen granted that is policytroubleshooting let's take a look atpolicy analyzerpolicy analyzer is is really good one ofthe great questions one of the mostfrequent questions that I always getasked for my customers is how can I tellwhen I last use a service account or aservice account key now this is criticalwhen you're doing account hygiene andcleaning up your account so what youwould simply do is click here this is inin preview right now and it will be GAat some point but but continue to watchthis space because you would just simplyput in the the the name of the serviceaccountthe projectthe projects the project in the serviceaccount name and then you just simplyrun your query and as you can see thisis when it was last used with thisintelligence you can now be reasonablyassured of when the security the serviceaccount or service account key was lastused and if you need to use thatinformation to govern whether or not youcanum clean up that service account or thatservice account key so we've taken alook at the policy troubleshooter policyanalyzer Parts these are tools in ourever growing Suite of policyintelligence tools use these to help yougain greater Clarity and insight intoyour identity access management and getgreater control and security over yourenvironmentsuper helpful super helpfulit's good to have those toolsokay okaythere we go no clicker what can we dowithout the clicker final thoughts okayhere we go the boundary of cloud is oneof identity I think we've made thatpoint multiple times here you want toapply a defense in-depth approach tocontrols and oh by the wayessential contacts please please pleaseconfigure those that's how Google gets ahold of you it's not strictly identitybut it kind of is so I threw it in thecore principles for Access Control areleast privilege and separation of Dutiesright you want to have as Grant muchgranular accessfor a person for an identity or aprinciple is possible and you want tobase it on what their actual Duties areright based on what Persona mappingright use groups when Granny writes andI am that's what they're there forplease do that it's self-documenting youwant to go granular and specific withIAM and remember that access changes arewhateventually consistent right they'relistening I remembered we didn't have acheat sheet up though you knowum inheritance please rememberinheritance that makes that recentlymade us a little nuts on something so uhit in generalum it applies to a resource hierarchybut sometimes there are exceptionsdepending on how it's configuredum and granting the owner role to aprincipal will allow them to access andmodify almost all the resources youreally do not want to use those basicroles whenever possible they're just toooverly permissive especially the ownerrole andthink we're done so so we're gonna we'regonna open it up for questions now but Iwant to give you you guys just a realworld you guys came here because so youwant to hear some real stuff so eventualconsistency is is very real and you needto particularly with your org policyconstraints make sure that you areapplying it at the at the appropriatelevel in the resource hierarchy sohere's some some some best practicesaround that when you go into in order toum in order to create an org policyconstraint you didn't hear it from thedemo but it's it's in there but you needto have an org policy administrator rolefirst you cannot make any changes to orgpolicy without having the org policyadministrator roll now one of if onceyou apply a constraint which can be oftwo types either a list or a Boolean itcould be a list or a Boolean constraintonce you apply the constraint at theappropriate level let's say I apply theconstraint at the organization level Istrongly encourage you to also checkyour folder structure as well so if youwant you want to make sure that you goto the folder and make sure that it saysinheritedmake sure that it says inherited then goto the project where the resources arethat you're concerned about and makesure that says inherited and if itdoesn't if it doesn't what you're goingto need to do is gonna you're gonnaclick a little radio button that saysinherit from parentokay you're going to make sure you'regonna need to click that button thatsays inherit from parent because if youdon't you think in here um it's a visualconsistency is taking forever I've madethis change three weeks ago and it'sstill not working well the reason it'snot working is because it was neverinherited so you need to make sure thatthe inheritance is appropriate in thatyou verify you verify that I set it atthe org level it is it inherited it atthe folder level and it also inheritedit at the project level as well makesure you do that soum questions questions I used to have anafroI used to have an afro until I startedworking on this stuff and it drove menuts first question so I'll let's makesure the mic is working there it ishello everyoneso your last comment about making sureat every levelwhat about organization at scale we have7 000 projects and a bunch of OU's andvery respective units right doing thatmanually is not exactly the best ofoptions right are there automatedsolutions that the audience may want toknow about or something that Google hasin the pipeline that would help asecurity team be able to properlyenforce those levels of inheritance soinso regardless of the of the size andscaleization the the principle of inheritancestill applies it still flows from thetop down the organization level thefolder level and the folders can benested up to 10 layers deepso so when you and that's why we need tokeep eventual consistency in our mindbecause depending on the size of amassive organization like that thensomeone sometimes that propagation isgoing to take some time to to occur butas far as an automated a way to makethat to make the propagation occurfaster um there's not anything that wethere is another session on specificallyon org policiesum that the the product team the productmanagers are doing later this afternoonso make sure you look for that for withAkshay and Florian uh yes next questionso with uh when you're setting up rolesand permissionsis there a reference for whatpermissions go to what roles because Ifind that the tools are very good attelling me what permissions I need butthen I have to guess because I can onlyassign roles and I don't know how theymap and sometimes it takes a while tofigure out which roles have what ohthat's a very good question is there away for me to determine what the whatpermissions are on a given roll that's avery good question and we actually havethat documented is well documented onour site so you can go in in the fromthe UI you can click on roles and thenyou'll see all the the permissions thatare associated with a given role if thatdoesn't if it's if you find problemswith that you should open a bug and letus know because that's Deborah likes toaddress those issues of customerfriction thank you two more two moreyeah yeah I'm interested inunderstanding if the I am rolerecommender or the policy analyzer applyto Google workspace permissions all theexamples I saw were for gcp like cloudso specifically the role recommender Idon't think I don't think we've madethis available workspace yet have we noit's only for only perform this is allfor the the GPS it's interesting thatyou're asking that I meanhit me up again that's something devrelcan try to help you know if that'ssomething we can do we can bring intoproduct because it the same problemexists in Google workspace right thereare users roles admins groups right andhow do we recommend permissions based onuh usage that's a very good question sowe'll we'll take we'll take that followus find us after the session and we'lluh we can we can do something withproduct management oh so we got 30 30more seconds and then I have thereferences take a picture of thatreferences slide okay hello uh see myteam we manage hundreds of projects thatinclude gcp projects I mean thatincludes uh I am access provisioning tovarious different teams service accountsAED groups many many different things isthere a recommendation from Google forfor checking permissions we have to goto individual projects console and checkfor IM permissions is there anyrecommendation from Google forimplementing something like a centraldata store where we can just see all thepermissions we granted across allhundreds of projects we manage so isthere such a way to see what wherepermissions have been granted so that'swhere policy intelligence comes in Ihate that we had to rush through thatbut you want to look at policytroubleshooter to determine if hey Ican't access this thing I should be ableto you put in the user's credentials andthen you can check based on what they'retrying to do or you look you can look atanalyzer to see who can change firewallrules in my environment and a lot ofother things but policy intelligence isgoing to be the best place for you tostart I think um we're getting the hookyeah we're getting the hook but umfollow us if don't don't go anywhere youget a cushion though don't go anywhereum you guys can we still stick aroundstick around to answer your questionsbut I also want to continue your journeyto go to other stuff is it the learningum go over to the learning file go overto the Learning Center and Prashantraise your handum if you guys are interested in gettinga Google certification Prashant wrote anexcellent book he's going to be signingthat book maybe today but you can get adiscount coupon if you find him over inthe Learning Center say nice thingsabout us say beautiful things thank youforeign"
}