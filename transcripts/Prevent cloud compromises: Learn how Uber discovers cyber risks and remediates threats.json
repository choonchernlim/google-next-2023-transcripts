{
    "title": "Prevent cloud compromises: Learn how Uber discovers cyber risks and remediates threats",
    "presentation_type": "Breakout",
    "categories": [
        "Security Professionals",
        "SEC216"
    ],
    "video_id": "UbjZzB3vZgE",
    "time": "Aug 30 06:45 PM - 07:30 PM CDT",
    "transcript": "[Music]hello everyone most welcome to thissession on prevent Cloud compromises inthis session we will learn how Uberdiscover cyber risks and remediatethreats with Google Cloud securityCommand Center it will be a firesidechat format uh where Uber will share alot of great insights and we willcomplement with some uh demos andHands-Onpresentations my name is yimen I'mproduct manager within Google Cloudfocused on risk and attack pilesimulations I'm one of the co-foundersof the attack p simulation capabilityfrom the very start and we're now verydelighted to be part of the Google cloudand the security Command Center my nameis Tim peacock I'm the the senior PM forthreat detection here at Google Clouddelighted to be back on stage here nextI've been on this team 5 years since westarted it and it is a joy to bepresenting once again here at Moscone inmy spare time at Google I'm also theco-host of the cloud security podcast byGoogle uh hello everybody my name isSona I hope you're having a fantasticday at Google next thanks for attendingour session so I am a security engineerat Uber you may have heard of uber youwe have used Uber our mission is to helpanybody go anywhere get anything andearn along the way I joined Uber in 2019and before that my background has beenin software architecture and softwaredevelopment today I'll be talking aboutour experiences using gcps SECproduct Michael thank you hi folks uh myname is Michael sakovich I'm also asecurity engineer uh on the cloudsecurity team at Uber been with Uber forabout 5 years uh previously I hadexperience in both the red teaming andthe blue teaming um and at Uber I buildsecurity um across the different Cloudproviders that wehave back toyou so we have a Content Rich sessionahead of us starting with Uber's GoogleCloud journey and Cloud security at Uberthen an overview of security commandcenter from there we move in to the usecases starting with posture managementthe vulnerability management with somenice automated flows um and then threatsmanagement with some real case examplesor illustrative examples and uh then theprioritization of findings and the whyuh and the of the remediation powered bythe attack pod simulations ending upwith uh key learnings and what's nextfor Uber so let's jump intoit starting with Uber's Cloud Journeyover to youSona Now I Know What You Must BeWondering Why are we standing in termsof our Heights probably not so Uberstarted with gcps Cloud journey in2017 uh to give you about a scale aboutwhat Uber is like today we have morethan 30,000 full-time employees and inour gcp infrastructure we have around2,000 gcp projects and to give you anidea of what kind of services we arerunning in gcp so on Monday I arrived inSFO I live in Seattle from SFO airport Itake Uber to go to my hotel I becomehungry I go to Uber Eats and I ordersomething to eat this demand and Supplymatching is what we call Uberfulfillment and this is poweredunderneath by gcp spanner databaseanother interesting use case like me youmight be a fan of Indian food anybodylike Indianfood say you order this big Indian foodorder uh you order mangoli your orderarrives you go for the manguli it's notthere what do you do you might go toUber Eats app you go to the help sectionyou say missing item you upload thepicture so on and so forth when you areinteracting with that app uh what wecall the Uber eat support bot is behindthe scenes and it is again Powered Bygcps Di flow so just some examples ofsome of the key Services we are runningingcp now moving the lens to SEC westarted looking into sec in2019 we started looking into sha as thevulnerability management tool then weshifted lens to uh sec's uh standardofferings of security findings then webecame SEC premium customer in 20212022[Applause]so let's now you you are both keypersons within uh security at Uber uhand it would be great to get insights onwhat's your mission and how do you splityour roles and responsibilitiesEtc yeah so security is a fundamentalpillar for Uberengineering with that in mind Uber Cloudsecurity team which is a part of widerengineering security teamhas a mission to help our employeesdeploy their services in the cloud in aconfident efficient and secured waypossible what this means is while wewant the engineers to have the agilityto deploy their applications in thecloud we want to ensure we know thefootprint and we want to ensure thesecurity of the application and the datawith that I would like to invite mycolleague Michael to talk about ourteam'sresponsibilities awesome thanks sonel uhso uh the cloud security team at Uber ispart of a large organization called ENCengineering security that is led by Uberciso so uh some of the mainresponsibilities of uh the cloudsecurity team uh let's start withresource provisioning or secure resourceprovisioning so whenever a uh anengineer a developer Uber employee needsto come up with resources on the cloudGoogle cloud in this case um they cometo our team they go through a anautomated workflow where they request toprovision resources what we do is we usea combination of infrastructures codewith terraform and uh API calls to comeup with gcp project with the correctresources that the user need uh weattach labels we attach uh policies andso on and so forth so this is one of theUH responsibilities and one of thetooling that we have next and tightly uhrelated to that is access controls soagain when a user requests resourcesthey would generally come alongsideroles right user roles in IM am to allowaccess to these resources so that's alsosomething that we need to manage andmake sure that these roles are not overrprovisioned so we look at what the userneeds and we provision the roles withthe least privilege policy in mind nowalso as time goes by we suddenly mightdiscover that you know what the useractually is not using some of the rolessome of the permissions that they havebeen given in the first place so weautomatically remove these overprovision roles to keep the attx surfaceto the minimum next is secure baselinesand attx surface reduction I alreadymentioned a tax surface reductionexample in terms of IM am but also whenit comes to GCB projects that are justsometimes left unused so we delete themthrough interaction with the userbecause we don't want to keep unusedprojects and secure baselines wegenerally use gcp organizationalpolicies just to come up withpreventative controls right to make surethat users uh can't essentially you knowdo something that's potentially harmfulnext is vulnerability management andwe'll talk in depth about vulnerabilityManagement in a bit uh in a nutshellessentially we need to identify uhunsafe configurations ormisconfigurations of gcp environment umand we have tooling that we built thatwe'll discuss in length next is threatmonitoring detection and alerting sounlike vulnerabilities we need tomonitor for active exploits that aregoing on when we monitor when we detectthem we need to alert the right teams tostart investigating and responding tothese we'll talk about that as well in afew slides uh uh usage guidance andoperations so um you know not everyonein the organization is uh familiar indepth with gcp and especially with thesecurity best practices when it comes togcp so uh when they have a question theycome to us right and we also provide thedocumentation for them to look into andto uh uh come up withtraining operations we have an offawesome Operations SecurityProfessionals that assist users wheneverthey have a question so they reply toquestions and when needed they also uhinvestigate or help investigate uhincidents so uh one of the main servicesthat we've used extensively Aselmentioned is SEC security Command Centerso with that I'll pass it on to team totalk about SEC yeah absolutely thank youand thank you guys for sharing socandidly how you're using gcp and howyou make it more secure what we builtwith SEC is really pivoted around whatwe think of as Three core areas ofresponsibility that map pretty cleanlyto what Michael just described so when Ithink about SEC on the next slide Ithink about our mission of making GoogleCloud the most secure place for yourworkloads and data really centeredaround the needs of three kinds of usersthe first kinds of users are those userswho are responsible for the security ofthe cloud platform itselfso when I talk to users about migrationsand coming to Cloud a lot of what theyneed to do to start with is get theright foundational guardrails in placeevolve as new compliance intents andrequirements come down from changingregulation and ensure that theirresources remain compliant with thepolicies they've selected for theirbusiness the second group of users weaim at are the engineers business peopleapplication owners who are building ourapp monitorization on top of GoogleCloudthese people need to know as quickly asthey can about vulnerabilities in theirenvironments whether that's theenvironment itself or the workloads thatthey're pushing to it and now we knowdespite all of our best efforts toharden our applications Harden ourenvironments bad guys still do bad stuffand so the part of sec I look after isactually the third pillar and it's howdo we catch bad guys incloud as quicklyaccurately and actionably as possibleand so how do we do that well I think ofSEC as having really four corecomponents the first of course isvisibility drer told us you can't managewhat you can't measure Decades ofinvestment in stealth Fighters tell usthat you can't hit what you can't see asDefenders you can't secure what youdon't know about now as Google cloud andas the control plane provider we ofcourse know about all of the resourcesthat exist in your Cloud organizationfolder or project and so everything inSEC is based on foundational visibilityinto what you've got on top of that welayer a comprehensive set of riskmanagement capabilities first aroundassessing the state of your Cloudenvironment itself do I have goodfirewalls do I have buckets that areopen to the world do I have a big querytable AEL for all users on top of thatwe layer operating system applicationand web app vulnerability detectionwe'll get deeper later on in a demoabout how we go from organize all thatinformation into making it universallyaccessible and useful for your teams onthe right hand side uh We've launchedmultiple kinds of threat detection someof which we announced here four yearsago it was a great demo we'll do thatdemo again today we've got uh runtimecapabilities now for compute instancesand we've got uh runtime capability forkubernetes as well uh finally it's nogood to protect your environment if youcan't communicate to your Auditors yourciso other people who care to understandwhether you got it right or not and soall of our ability to detectmisconfiguration and report on it isalso available pivoted against leadingcompliance Frameworks leading industrystandards and available for export soyou can as a security Defender easilyreport yeah we got it right here's howwe're trending over time and so that'ssec in a nutshell uh with that back toyou guys thanks Tim so now let's moveinto the use cases on how Uber uses SECand you shared in the beginning thatit's about 2,000 projects more than30,000 users so how do you manage yourposture management the vulnerabilitymanagement at at this scale yeah so atUber Cloud security team and theengineering team have sharedownership so we are having the engineersbuild the application and we want tohave security measures on top of it sowhat we do is the security team gets allthe vulnerabilities in the cloud and forus it's the Seca security healthanalytics the source of Truth for thevulnerabilities and we create ticketsfor the engineering teams to fix so whatwe do along the way is we try to enrichthe vulnerabilities we try to assign itto the right users have the rightownership information we give detailedrun books on how to fix thevulnerabilities we give SLA informationon when they should be fixing also if sis giving a lot of vulnerabilities to uswe also have a filter on top of thevulnerabilities of what is important tous right now based on the organizationor business needs and probably what isnotimportant so what we have done is wehave automated the whole workflowbecause if you can imagine there are2,000 projects there are tons ofvulnerabilities that may be arising forone reason or the other we wanted tohave a scalable solution and that iswhat I'll be talking aboutnext so this is the solution we have putin place it's a complete gcp nativesolution what we do is um anytime shahas a new vulnerability uh it sends apops up message for Popup is themessaging queue a subscriber to the pupsup is our Cloud function it is called anaggregator Cloud function So This Cloudfunction is very targeted it is for eachvulnerability so say there are ummultiple vulnerabilities happening atthe same time there will be an instanceof cloud function spun up for each ofthose vulnerabilities that is how we arescaling next aggregator calls the endReacher Cloud function so each of theseend reachers have their own duties orresponsibilities one may have theownership information we have some logicgoing on for that other may have the SLAinformation a third may have the Runbooks or steps to fix the vulnerabilityinformation once we have once we haveenriched updated this vulnerabilityinformation from what we got from SEC wethen store it into the gcps no SQLfirestore database we then again send amessage to our Uber on-prem service it'scalled continuous monitoring service itis also our ticketing service which iscloudagnostic the cloud monitoring servicereads this latest vulnerability from thefir store database and creates a jiraticket in this case for the teams tofix so what you see here is a sampleticket a sample jira ticket that iscreated for a project an owner isassigned again there is a logic for howwe determine the right owner becausethere are a lot ofprojects we also give the resource linkso once you get this ticket you can hiton the resource link go to the rightconsole area to see the details this isa vulnerability for open RDP Port wealso attach a runbook to it to tellusers this is how you fix it there isSLAinformation um and then you know how tocontact our team in case they haveambiguities or need more clarificationon this one another thing that we dothat is important is say the team memberthe engineering team member goes aheadand fixes the vulnerability we want anautomated way to verify that thevulnerability has been fixed so we havean automated way to put that uhverification in place so that once weverify we can resolve the ticket and theengineering team is off the hook sothat's the end to endend workflowthanks I know this workflow is workingout well for you uh and that you alsohave set up very automated flows on thethreat side so over to you Michael forfor that part yeah so when we talk aboutthreat management it's it's it's a bitdifferent right when we fromvulnerability so sonel mentioned when wesee vulnerabilities we have slasassigned to vulnerabilities based on theseverity and the risk associated forvulnerability and then we uh expect theresource owners to fix the vulnerabilitywith our help uh when it comes toexploits or threats this is somethingwhere we don't really want to startusing tickets uh and uh you know longslas instead we need to pretty muchreact uh in real time so we have a uhvok virtual Security operation Centerthat will ingest these alerts so the waywe uh really build this pipeline it'squite similar right so again uh from thesecurity command uh Center we use thecontinuous export functionality to umsend a pops up message to a subscriberin this case a subscriber is going to beUber seam right so uh from seam it goesto sore and essentially for for seam ifyou're interested uh we're using elasticand for sore we're using Phantom at themoment so this goes into the what wecall SRI team security response andinvestigation team through viso now theyreceive alerts of uh actual threatsright of actual exploits or potentialexploits uh we enrich these in real timeas needed and we also as some mention wealso apply some filtering as needed sofor example if in case we detect a falsepositive in particular project right wecan filter that out so this is uh thisis how it works uh when it comes toactual thread detection and the sourceof Truth for us is uh ETD event threaddetection uh as well as the othermodules such as vmd right virtualmachine thre detection and so on and soforthback to you guys thanks so let's now uhmake this come to live even further withsome example cases um and and some demosfirst the leaked credentials part yeahso so uh just a few examples of the theactual threats right that can occur umso first example you might have seen ityourself in your own environmentshopefully not right you might have readabout it right very common one andunfortunate one is leak credentials sowhat may happen a user creates a serviceaccount they download the keys to theservice account and then for some reasonthey put these keys in the clear inadjacent file potentially or added tothe code and the code might get lostmight get uploaded to GitHub this issomething that we really don't want tohappen right so we're we're luckybecause ETD actually monitors GitHub andpublic repositories for occurrenceswhere Keys public keys are uploaded soin this case right we're getting alertedright away through the pipeline weerearlier and we can send it to our uhsock team to start investigating nowusually what what would they do is ofcourse they're going to rotate thesecret or they're going to disable theservice account and they start lookingthrough the logs to understand what hasbeen done with this particular uh key orservice account right has it beenaccessed has it been used uh and so andso on uh and then for the next uh ohteam you want to show us how it's how ithappens awesome so seeing is believingand one of the fun things about beingthe cloud provider is you get tointegrate with people like GitHub likegitlab and as Google we actually scanthe whole internet every day looking forleak Secrets as well when we see themthey come into security Command Centerlike any other finding and I'm going togo into the Jason view here not becauseI think people at 5:00 on a Wednesdaywant to read Jason but to show you thatwe provide in context in SEC exactlywhat you'll get out when you set up theexport because like the leave itIllustrated here we know users want tolive in their Sim and so we make it easyto understand what you're going to getwhen you pull this stuff out so just asan example we can scroll down we can seewhat's in here you can see exactly whichkey was leaked what identity it is weeven tell you where you can go see ityourself if you don't believe us that itwas leaked so this is one example of howSEC protects identities we'll talk aboutanother one rightnow awesome thanks team over to so ifyou believe we may or may not haveprayed to demo Gods we may or may nothave prayed to demo Gods uh live demo isalways a challenge so Kos to Tim forgetit working the other one that we mightbe interested in is anytime um a grantis given to say a dorant service accountor a permission assigned out of the exout of the ordinary we want to knowabout it so this could be a case whensay an orc admin who's part of thehierarchy but not really part of theactual project is assigning um say APrimitive role to somebody outside ofyour organization this could be a vendorcompany like Google in our case we wantto know about it because this isespecially important for companies thathave the organization policy of domainrestricted sharing turned on what thisessentially means is that nobody outsideof the organization can be assigned arole so if an org admin is trying toassign a role to say add google.comaddress who's not part of theorganization it is very interesting andthey better have a good businessjustification to do so with that Timwould like to show you demo so I lovebuilding products at Google because Iget to bake them into the control planeunlike a thirdparty offering whereyou've got to hook things up withservice accounts you've got to worryabout log data leaving your org we do itall locally and because we're thecontrol plane we really understand it sowe've got a we've got an I am Grantscreen here and this is a Googleengineering org all of the people whoare in this org are at google.comaddresses you can see a couplehere would somebody here like to be madeeditor with your Gmailaccount yeah let's make you editorbecause that seems like a sketchy thingto do today right Joel you're a braveman I hope nobody signs you up for spammessages you know we see this all thetime in practice contractors third partyvendors Engineers who are in a hurry towork from home that night and don't wantto deal with a multiactor they make badgrants and it's not just external grantsthat we detect we detect grants tounmanaged accounts grants to dormantaccounts we're really good at catchingissues as soon as they start and when Isay catching issues as soon as theystart I mean if I go to security commandcenter right now and the demo gods havesmiled upon me we should have a findingabout what we just did so let's tab overand here we are in security CommandCenter this is a a view of the thefindings I'm going to hit refresh andnow the demo gods are going to do megood tonight and we're going to look andsee I want to show off our new queryeditor real quick because I've got twoof my colleagues in the back who buildthe platform stuff and what they buildhere is really powerful in the old daysif you saw SEC before there wasn't allthis capability to explore and buildfilters and pivot on different thingshere so now we've got this greatcapability to add filters and we can sayI want to filter for just this categoryof a isue so let's add that to ourfilter and then let's hit apply we'regoing to Pivot over to the org levelview because we want to make sure we seeall of the issues across the whole organd again we're going to pick on justthe IM anomalous Grant and we are goingto see that we're actually looking at anend to- end test because of course thedemo Gods decided maybe not tonight butas an example of what you would see hadthis finding been triggered on the timeframe that was relevant you would seeall of the detail details of who madethe grant where did they make it fromand why do we think it's a sketchy Grantyou can also pick in further review theexact details of the offending accessGrant here you can see that they weregiven editor but this was just our endto-end test Joel apparently escaped myclutches for now so with that back toyou while I go remove hispermissions Joel if I were you you havea golden opportunity just go and findout what's there or spin up a highcomputeVMso the next one another hypotheticalscenario say you have a red team doingan exercise spinning up a high computeVM they may or may not be Joel and theyare running password cracking hashcracking and they are doing all sort ofthing just to see if you have properdefenses in place you want to know aboutthose alerts so this is where SEC comesinto the picture ET has the capabilityto tell you about Bitcoin mining aboutpassword hashing and Tim would like todo another demo this time I'm just goingto show you something so when you thinkabout the problems in cloud cloudsecurity is not like on-prem securitywhen you think about Cloud it's not justdid I get malare onto an endpoint it'swhat did an adversary do once they hadpermission in your Cloud environment andwhat we see in 86% of cloud compromisesis not just oh the adversary got in 86%of the time they end up Miningcryptocurrency and they do this becauseit's instantly monetizable doesn'tmatter they're not paying for it anywayand so although it's not especiallyefficient it's super common now when Iwanted to build security for GoogleCloud I didn't want to do what we donefor 30 years because let's face itcompared to say Aviation safety recordsthe security industry isn't doing sogreat so what if we could do somethingdifferent than endpoint agentinstrumentation What If instead as thecloud provider we could take advantageof our position providing not just thevirtual machine to you but theunderlying Hardware the underlyingsoftware that virtualizes it and eventhe racks that that they're built on andso what we've done is we've baked intothe fabric of Google Cloud a capabilitythat only Google Cloud offers and wecall it virtual machine threat detectionwhat we do is we grab the contents ofmemory agentless invisibly with noimpact to your running compute andanalyze that memory off to the side andso rather than give security teams thechallenge of convincing their partnerengineering teams to give them a changewindow to then deploy 5% of CPU usingagents we just baked it in the platformyou know what's great about that is it'son regardless of what image theadversary runs or what they disableinside the instance they've compromisedand so this example finding hereexecution cryptocurrency mining ER ruleyou can see the AI explanation it'sprobably done a better job than I wouldand so you can look at that but we'llalso scroll down and we'll show youwe've got all of the details not justabout what instance had the issue withthe name of the process and the path ofthe binary that was executed and now youmight say how do you do that without anagent and the answer is well we gotreally good at analyzing memory weactually unwind a stream of bits intocoherent understandings of what'sHappening inside that instance so I cantake a stream of bites out of thehypervisor no clue from the instanceabout what's what identify the swapperprocess key into the kernel symbols andthen when I've got a Yara hit on a pieceof executable memory I can workbackwards from that chunk of memory backto the kernel symbols process tablefigure out which process owns thatmemory and pull all the Insight I needagentless no impact no exposure toadversaries to figure out what's goingon in that instance and so that's how wegenerated this finding this is how wegenerate hundreds of these every day atCloud scale we're really proud thatwe've baked this into the platform in away that nobody else hasdone oh one more thing we're soconfident in our ability to detect Cryptmining that we're willing to put ourmoney behind it so being the cloudprovider we don't want to just give youCloud we want to share your fate and soif we fail to detect a mining attackwith SEC premium we'll cover up to thefirst million dollars of damage thatthey inflict by using compute for thatpurpose so we're so confident we'rewilling to stand behind our product tothe tune of a milliondollars if we get it wrong nobody elseoffers this nobody else has that kind ofconfidence in their ability to catch badguys now let's move on to another keything how to prioritize among findingsum so first Michael and so how do youprioritize among findings yeah that'sthat's really a u you know a difficultand a good question because we uh atUber scale since we have thousands ofprojects we also have many manythousands of findings so these findingswill generally we come with a severityright high medium critical Etc but uhwhat do we actually need to addressfirst which one of the highs or maybefor some medium severities because theyapply to a particular resource that isvery high value to us maybe pii uhbucket with sensitive information rightmaybe that one should be handled firstso how do we decide right which whichone to prioritize or which ones toprioritize uh we also have an uh achallenge when we try to contextualizethese findings right what if somefinding or one particular finding uhaffects multiple resources and byeliminating that we actually eliminate alot of the risk so how do wecontextualize this finding with otherfindings and other andresources um as I mentioned we need thecapability to assign some sort of avalue to some to our resources maybe wehave a sensitive VM that we really needto keep running right or as I mentioneda bucket with sensitive information nowfinally uh when we talk to uh users whoare not necessarily security savy weneed a way to motivate them to resolvethese findings right thesevulnerabilities and so how do we do thatwhat are the tools that we can use toshow them what might happen if anattacker were to exploit a particularvulnerability so we are lucky to startto have started collaboration with theattack simulation some time ago and overto you I came to talk about it yeahthanks for for the summary I think youyou're spot on in describing the needand which is I would say for allcompanies uh more or less the same so uhmight have large environments complexenvironments many findings we all havelimited resources we need to prioritizeand in in our world this is all aboutattack PA because a high severityfinding might be deep down in thearchitecture tough for an attacker toeven reach or easy to reach but fromthere very tough to to get to any highvalue resources and often what we seethat it's the combinations of findingsright so there might be an engineeringteam over here doing a configuration aMis configuration that they think is alllegit with in their view of the worldbut when combining with what's over heremaybe some access rights maybe somevulnerabilities could create thosehighways of risk to towards your highvalue resources and and this we identifywith the attack PA simulations so how itworks it can be split into these threesteps first is a big graph generationphase we we the tool creates a big graphmodel of your gcp environment itincludes the detailed asset informationfrom SEC it includes the relationshipbetween those assets and uh Cloud nativeinsights into I am policies and more onthat model we run the simulations uh andand the tool then distills out for youhow exposed are the valued resourceswhat are the paths and the paths ofleast resistance to those resources andfor the use case of um prioritization offindings which findings should I thenprioritize so I just want to highlight anumber of features before we go intodemo um first these simulations run onthe model they do not create any risk onyour live en environment whatsoeversecond they include both what you 100%know about your environment which is onething so great about Cloud right youknow a lot but also and importantly theyinclude the known unknowns such as usersgetting fished or the risks ofcredentials leaking making these sort ofrisksimulations um and it's all fullyautomated you you do not need to uhspecify any complex queries for whatattack Parts you're looking for yousimply let these simulations run toidentify the parts uh identify the risksand do the prioritization for you andit's Cloud native uh with with Google nosnapshots sent to external providers sowiththat love toso imagine you're defending anenvironment and you've got this pile offindings and you want to know which onesI should deal with first which findingsopen up the most risk Cloud environmentsare hard to understand each cloud isdifferent if you're an AWS expert gcp isdifferent if you're an non-rem personclouds a whole new kettle of fish alttogether and so what we've done here iswe've really tried to bring together theattack path simulation some of the AIstuff I'll show later to democratizetalent and so here we've got an exampleset of findings some with a highseverity some with a medium severityothers with a high severity with a muchlower attack exposure score and so whenit comes to Cloud environments severityis not the most important thing to keyoff of it's truly do I understand howthese findings enable adversaries tomove through my environment and so we'regoing to pick in on the details aboutthis overprivileged service account userand so we pivot over to this and you cansee that this one finding actuallyimplicates three different resourcesthat I've said are highly valued inthese risk chains so over on the lefthand side we've got instance 2 three andfour maybe I'm in a I care aboutinstance four kind of mood so I canclick on that dynamically redraw it Iknow people in the back are squinting soI'm going to shrink that down and thenwe're going to walk through it so we putthe attacker on the public internetbecause assume they're starting from theleast advantaged position we thensituate these three findings related tobad network configuration and in a veryDonald Rumsfeld would be proud of usunknown unknowns kind of way simulatewhat would happen if there is a leakedSSH key in this case a leaked SSH keycombined with those Network holes enablethe adversary to get to instance onefrom instance one we can see what theymight do on that node connecting overthe network Network logging in with anSSH key they're able to connect to theinstance they're able to get full accessand then they're able to achieve serviceaccount access and this is again wherecloud is different from on-prem what youknow about defending on-prem systemsmoving over networks installing malwareon instances it's different in Cloudwhere attacks are powered by identityand if you don't understand therelationships between your identitiesyour resources and your network you'renot going to succeed at Defending Yourcloud and so getting access to thatservice account what does that enablethe user the attacker to do well in thiscase that service account itself has anissue which is the original one welooked at the over Prov uh provisioningthat allows the adversary to then log inusing OS login which is our Cloud nativeway of accessing instances with Cloudidentity they can pivot to instance twoon instance two they discover anotherservice account which is itself not justover-provisioned it's actually got adminpermissions and what this serviceaccount would enable the adversary to dois not just access other things they'reactually able to change the networksettings change your environment andwith that that's where we simulate herethat they update the firewall create anew rule with it and then use the OSadmin login to get to instance 4 so youmight say that that's kind of afar-fetched thing but adversaries areare pretty good like we've got 30 yearsof respecting our adversaries at thispoint and what's great about thiscapability is that it understands Googlecloud and understands how you pivotspecifically through Google Cloud ratherthan say a lowest common denominatorsolution that attempts to understand allclouds but can't possibly have the depthof expertise for our environments thatwedo aren't there one more thing to todemo with there's one morething you gota do it one more thingright on AI summariesso attack paths are not easy tounderstand it took me like 3 minutes towalk you through that imagine if youwere a junior analyst or new to Cloudhow would you figure out what this meanswell with AI we think about you knowthreats toil Talent this is where we'reusing AI to supplement talent and so wegenerate in real time particularized toyour environment with your risks an AIgenerated summary and so here you cansee it's actually a pretty decentsummary that the AI spat out an attackercan access instance one because has gota public IP address they can use theservice account which is overprivilegedthey can pivot they can get to instancetwo overprivileged again update thefirewalls and get to instance 4 and thisAI summary is generated locally so thisis duet AI you probably heard about thatthis this week what I love about this iswe're not moving data to a third partyI'm not taking your vulnerability dataas a third party and handing it to yetanother third party I'm keeping yourdata about Google cloud and yourweaknesses onog gole Cloud inside thatsame Geographic technical legal trustboundary you've already established withus as your cloud provider and yoursecurity provider so as you think aboutbringing thirdparty Tools in as youthink about the third party AI toolsthat they're bringing in think aboutwhat that does to your trust model andthink about how you can take advantageof local AI to power your securityresponsesafely now I think I'm done I think youso tooall right and that went through the whyof remediation so to to summarize in anutshell what the attack p simulationsprovide is an attack exposure score onGuiding what to prioritize attack pathdetails so you can dig into all of thosedetails if you want to to validate andto look into the why and then you havethe AI summary so you can send to forinstance thatum engineering team I described thatmade the configuration or themisconfiguration on why is it soimportant to mitigate thismisconfiguration all right so we'vecovered quite a lot of ground uh so intheana there Michael and sonel keylearnings and what'snext yeah thanks guys so uh we love theuh AI summaries right imagine a personright and uh maybe an engineer a newengineer to the Ops Team not necessarilyvery security savy just yet or maybe notjust gcp security savy right they canjust view a human readable summary ofwhat happened or what might happen umand I spoke earlier about motivationright the problem of motivating resourceowners to remediate their vulnerabilityso you know if we're lucky we can copyand paste this summary automated asummary right and say this is why rightthis is why you want to remediate thatfinding so so I think this is awesomewe've seen it in action and we willbuild automation to utilize this uhautomated summary so kind of lookingback at what we discussed a number ofthings right um we need to keep up withattack and defense techniques of courseattackers develop there's always newvulnerabilities that come out luckily ifwe build automation on top of uh Googleand services like SEC uh weautomatically benefit from themdeveloping new uh uh new detectionsright new detections come up we readabout them we understand them theyalready are ingested into our Pipelineand the treatment is the same right soso I think this is uh this is an awesomefunctionality uh I mentioned AI summaryand the resolution I don't know if younoticed but AI summary also tells us howto uh remediate a finding right theythey they provide the the actual stepsto remediator finding um and then wementioned vulnerabilitycontextualization right another problemthat we see happens right we see a longlist of vulnerabilities in and theirfindings but we need to be able torelate between different findingsdifferent vulnerabilities in differentassets and that's what we saw we cansolve with the help of attack passsimulation so this is what we covered inthe naturell let's pass it on to sonelto uh cover what we're going to work onin the future yeah so looking forwardwhat we want to do one of the firstthings we are going to look at is one ofthe first of many things we are going tolook at is how we extend our Autoremediation functionality so there arevulnerabilities that are safe to Autoremediate U safe and secure to Autoremediate where we do not needparticipation from engineering teams sowe would like to put more Focus thereand extend the capabilities next wewould like to also include Dynamic riskscoring in the tickets that we generateSEC has the capability now we need topull that capability and put into to ourticketinginformation Inventory management so SECdoes provide asset inventory what wewould like to do is we would like to getinventory outside of our gcp environmentat Uber and say oh this particular teamowns these many things these many assetsyou know they are interesting to look atuh did anything happen to them so youknow just maintaining that Inventorymanagement system uh next is securitydata Lake uh we want to have all oursecurity logs not just restricted to gcpbut outside of it as well go flowinginto One Direction so that we can haveour AI models on top of it and learnfrom it so those are some of the thingsthat we are considering goingforward"
}