{
    "title": "Run your high-performance database workloads on any cloud with AlloyDB Omni",
    "presentation_type": "Breakout",
    "categories": [
        "Database Professionals",
        "DBS208"
    ],
    "video_id": "U4q6uBuKJyo",
    "time": "Aug 30 05:30 PM - 06:15 PM CDT",
    "transcript": "foreign[Music]Welcome to our talk run your highperformance database workloads on anycloud with ledb or what I wanted to callit what is ledb why is it cool whyshould I careum if this isn't the talk that youthought it was hang around anyway itwill hopefully be at least mildlyentertaining and we'll tell you aboutsome really cool database product thatwe've got coming up Ali DB which as oftodayyesterday yesterday from Tech previewover to public preview so it's even moreavailable to play with who are weum I am Gabe Weiss I am a developeradvocate for Google Cloud specializingin database and infrastructure and mytwo friends on stage Kevin I'm KevinJernigan I lead the product team forAlly to be Omniand I'm Simon Payne I'm a consultantfrom a company called pythian and wehelp customers with all sorts of cloudand database needs so now you know whowe arewho are you well so for today our agendathis is what I wanted to do because Ilike doing demos that's why I'm here andthat's why Simon's here we brought himon stage to do the demos and then theysaid no you probably need to actuallytalk about the product a little bit soinstead this is what we're gonna doum we're we've moved through theintroduction phase we're going to do alittle bit of what is alodb our Cloudversion so you can kind of wrap yourhead around the product in general andwhy the downloadable version is cool weall go into talking about thedownloadable version lodb Omni we'llwalk through a couple of use cases we'lldo some demos live Demos in hereum with the Moscone internet we'll seehow it goes we'll pray to the demo Godsum then we're going to skip the nextpart and then I will wrap upso now that we have covered that I wouldlike to know who you all areum first I like to kind of get a pulsefrom the audience how many of youconsider yourselves like applicationdevelopers software Engineers peopleHands-On keyboardnice you're my people I love you allthank you for being here do we have anydbasI'm seeing some in the same hands cooluh what about like it decision makersthe people that decided on your stackyou knoware do you all do everything so startupshow many are from startupssome of the same hands yep good okay uhhow about embedded system designersI see one kinda all right this isprobably not the right talk but stickaround anyway because we'll keep youentertained so what actually is omnidbit's a product did you know thatGoogle's actually shipping a productit's not a servicewe usually work in services in the cloudright all of our standard applicationswe've got VMS we've got serverless allof those are things that we're runningnow we're shipping a product somethingthat you all run I'll be ledb Omni is aproper product it's got release notesand like the readme in the package whenyou download it it's cool so there's alot of differences between like what isa product versus a service and I kind oftouched on it a service is somethingthat we run we take care of it we manageit we cover the SLA we cover maintenanceif it goes down we're the ones that areon the hook for it product you all getto runthere's some good and the bad in thereobviously like you know we're coveringall of the the management of the thingbut that also means that we restrict itin certain ways so one of the nicethings about a product is you all get toown it you get to do what you need to itso if you need it working on premisescool run it on premises if you've gotvery specific requirements aroundcontainment air gapping we now have aproduct that you can do that with withall the power of ledbso what is ledbto understand the product that we'velaunched I want to just really quick didhow many of you actually went to thealodb session that was up yesterday orthe main session from yesterdayit looks like about half of you okay soI'll cover some stuff anyway but theywent into way more detail about Ollie DBthan I'm going to I'm going to touch ona lot of the points that I really careabout and then I feel strongly aboutabout it from the development from thekind of user standpoint of what'simportant to me so I'll ADB itself justso that we get the Baseline out of theway it is a postgres compatible databaseand not just a database engine it has alot of stuff around it it covers thingslike the ability to spin up read poolsfor you all the manageability aroundthat it's got a lot of extra Magic ontop of postgres that we've built into itaround things like performance aroundumyeah all that good stuff so all of themanagement that you get from a Googlecloud service things like automatedbackups all the data encryption intransit at rest all of that stuff GoogleCloud hands will for you uh curated listof extensions like I said part of havinga service means that we restrict thingsa little bit so on extensions everyoneloves post postgres extensions that'skind of what we live and breathe on ifwe use postgrescertain extensions do potentially reallyawful things for your database with amanaged service we can't let you havethat full freedom because we arebeholden to an SLA to make sure thatit's available so there are certainextensions that we hold back because weknow that the likelihood of itdestabilizing your databases there sothe cloud alloy DB we don't let you haveall of those extensions so having saidthat I want to walk through a couple ofwhat I consider the real highlights ofaudio DB for me first up is performanceidb is four times faster than postgresout of the boxfor certain kinds of analytical queriesit's up to 100 times x so how did weactually do that first we controlend-to-end Hardware we can specializethe software specifically and optimizefor the hardware that we've got thereare certain other companies that do thesame thing like they don't let you putyour stuff on other Hardware Apple sothey are and we are able to optimizeperformance specifically for thehardware that we know we've got so wecan make software changes to takeadvantage of thatthe columnar engine is the core part ofwhere the performance comes for theseanalytical queries we have a separatecaching system that we've added topostgres that instead of storing as likethe buffer cache does in a row formatchanges into columnar format thatoptimizes certain types of queries so ifyou're doing aggregate queries give meeverything you know with a couple ofpredicates where my price is over ahundred dollars and I only wantum Tuesdays you know any of those kindsof queries a columnar format optimizesfor those kinds so you can do analyticalqueries in loudb faster and moreefficiently than you can on out of thebox postgresthen we've got real-time businessinsights who knows what real-timebusiness insights actually meansme neitherI got a couple of sales yeah there yougo so uh I stole some of these from oursales guys real-time business insightsto me means two different things if youask a sales guy they're gonna say thatthis is because you can actually what Iwas talking about these analyticalqueries I want to get information out ofmy data that's real-time businessInsight I think of it more of I want tosee what is going on with my database Idon't want to have to set up a bunch oflike I.T folks staring at a screenschecking my CPU utilization is thisquery likeum out of control what's going onpart of the advantage of a managedsystem is within our console you havethose tools built in so I know what theCPU utilization is of my audio DBinstances by going to the cloud consoleand I can see it for me that's likereal-time business insights is knowingwhat's up with my database without mehaving to build that plumbing so that'sthat one slas is another advantage ofhaving a managed service we guaranteethat it's upODB guarantees 99.99 four ninesavailability that's like what 20 minutesof downtime a month I think is that whatthat one works out too I forgot the mathsomething less I think it's somethingfour four minutes a month thank you sofour minutes a month is it now somethingwith lodb that is new to that databasecompared to other slas that includesmaintenance so anytime that we need totake your instances down to do updatesto do cleaning on the data whateverstability stuff we need to do thatincludes that so four minutes a monthcounting any of that downtime that weneed to do for maintenanceml driven management and configurationso iodb includes some cool machinelearning now we're not talking aboutlike the duet AI stuff that you've beenhearing all over the conference this isthis happened before the the mad rush onthis ml driven management configurationis things like with postgres one of thebiggest hits that can happen to yourdatabase is when do you clean it whenyou do that vacuuming when you deleteactually delete the data that you'vemarked for deleteone of the cool things about alodb we'veincluded is this vacuum management wherewe will figure out based on yourworkload pattern based on your like whenthe intense workloads are coming in whento do that cleanup for you you don'thave to manage it anymore we can do thatfor you so we figure out the best timeto do it so it doesn't impact we havestorage and memory disaggregation soyour compute your processing and thestorage itself are separate in ledb soboth of them scale independently so wecan help manage the optimal use ofeither storage or your memory to makesure that we are getting the best bangfor your buck out of your instance andthen last we've got data tiering doesanyone know what data tiering meansso data tiering is putting the databased on your usage so into the fastestpart of your either memory storage ColdStorage so we arrange the most used datain the place where it's going to beaccessed the fastest so we have the partof the machine learning is to figure outwhich data goes where so that's whatthat one is then we've got transparentparticular pricing again remember Istole these for most of our sales guysthis means that we are very clear aboutwhere the pricing comes from we don'thave any hidden charges the price iswhat the price is you've got yourIngress and egress charging so if youcan figure out how much data you've gotwhere it's moving to and how muchprocessing power you need it's veryclear how much this is going to costit's not going to like surprise you withhidden charges anywhere so that's whatthat one isso having said that now we have a handleon the manage version of lodbtake all of thatstick it in a couple of containers andnow you can deploy it anywhere I thinkof ledb kind of like the um the where'sWaldo of cloud databases you can kind offind it anywhere but you don't reallyknow where to find it because it's notconnected to the cloud when you do it ofcourse not I probably lost you allbecause you're all looking for a whilethough aren't you let me helpforeignI've got I've got more if you reallywant to do where's Waldo we can do moreof those later so now I would like tohand it off to Kevin to go into a littlemore detail about all ADB on methanks Gabe umthis is supposed to be a container bythe way on this slide and uh ledb livesinside a container when you download ityou're actually downloading a Dockercontainer with the ldb engine in it weactually have a little component in aseparate container that manages thememory but basically you're downloadinga Docker container so this is how itcomes but then the question is whatenvironments does it run on and so youknow we supportthere we go we support a whole bunch ofenvironmentsum certain flavors of Linux Red HatUbuntu Debianand then we also supportum running in various clouds not just onpremises not just in a server that youmanage you can also run it obviously inGoogle cloud in your own GCE instanceyou can write an AWS you're going to seesome live action on AWS in a minute youcan run it in Azure you can run it inany probably pretty much any Cloud yourprivate Cloud your data centeryou can run on a laptopso and we will have a demo on the laptopin a little bit too so it only reallyneeds a two gig of memory two CPUs and20 gig of storage to get started so ifyou have a laptop with that muchcapabilities you can run it there or youknow pick a server running in a cloudenvironment for thatso it runs anywhere packaged in adownloadable containerand and again you can put it almostanywhere but it has all the samecapabilities that you just heard aboutin alodb cloud with a couple exceptionsbecause ldb Omni does not have theseparation of compute and storage so youdon't get the benefits of that the extraperformance and other capabilities ofseparating compute and storage and ofcourse it doesn't have a control planeit's managed by you it's not managed byus so you know you'll have to figure outand I'll talk about this more in aminute you'll have to figure out how toset up AJ and backup some replicationwe're going to give you a bunch of helpon how to do thatum having said that it still scalesreally high it scales much better thanstock postgres because a lot of theimprovements we made in ledb were to thecore postgres engine for highconcurrency scalable workloads on largerservers with lots of CPUs ledbi Omnistill scales really well it scales abouthalf as high as ldb in the cloudand it's got a bunch of intelligencebuilt in like I talked about like likeGabe talked about to manage things likevacuum and memory and other things so upto two times the throughput of stockpostgres we see that result thoseperformance results in transactionalbenchmarks so we see these kinds ofresults when you have high concurrencyand small transactions which is typicalof a lot of workloads and I actually setup to two it's actually more than 2x thebigger the machine the more CPUs thefurther it pulls away from stockpostgres because stock post grows flatlines at somewhere between 12 and 16CPUsyou can give it 32 or 64. it won't gofaster so we're actually more than 2Xand ledb cloud is more than 4X at thehigh endoops went the wrong waythere there we goum there it is again yeah allowed to beomnic includes the columnar engine itworks exactly the same way as it does inthe clouds it's the same code samecapabilities gives you up to 100xperformance improvements or more anddepends on the query and the data andall thatum but that's all exactly the same as itruns on the cloud because the columnarengine doesn't depend on separation ofcompute and storage you get a bunch ofstuff in the special columnar format inmemory and then the queries will runmuch faster so if you have the same CPUsame amount of memory same data samequeries they'll run exactly they'll getthe same performance improvementswhether it's LED cloud or LGB Omniand it has all the same ml drivenmanagement built inadaptive vacuum management adaptivememory managementit also will automatically move datainto the columnar format based upon yourquery patterns your workload pattern andit will also we also have the indexadvisor so it will actually watch yourquery patterns look at your data andsuggest indexes that you might want toadd or take away from your tablesthereumwe're not going to talk much aboutpricing today we are planning toannounce pricing soon the focus is goingto be very similar to what you see withledb in the cloud make it transparentpredictable easy to understand andaffordable when we launched originallyback in late March we made a commitmentthat our pricing would be a fraction ofthe cost of Legacy databases and that'snot going to change when we actuallyannounce the pricing you'll you'll seewhere that fitsso this slide is a good comparison ofallodb in the cloud the left most columnldb Omni and self-managed postgres soI'm not going to go through everythingon this slide but you can see theperformance differences in terms ofthroughput differences the 4X and 2xshould actually be more than 4X and morethan 2Xthe analytics performance is the samefor both alliedb versions because it'sthe same columnar engine capabilitythey both have the autopilotcapabilities all the ml driven automaticmanagementum and SLA is kind of important tounderstand as Gabe pointed out this is aproduct that you manage so it's not aservice that we can give you an SLA forso I'm going to talk a little bit abouthow we're helping you with that andwe're going to give you more help overtime but it's still a product thatyou're going to install and manage inyour infrastructureumand the same thing for the backups andreplication Etc we're going to help youin setting all that up but it's stillyour job to actually set up and monitorand manage your backups and replicationin your ha and Dr setupsand then finally support we will beproviding standard Google support allthe way up to Google premium supportdepending upon what level you've signedup for for your ally DB installationsum it's obviously going to be a bitdifferent since we're not in you knowyou're not running in our infrastructurewhere you can see things happening soit's going to be a different supportexperience only because you'll have toreach out to us and give us informationon your your environments and all thatbut we are going to provide the samelevel of Support over time as we do forour on-prem for our sorry for ourcloud-based servicesall rightI went the wrong way againdown is up yes down is Up Up Is Down solet's talk about common use cases and sothe first use case that we've heard fromcustomers because you might be wonderingwhy do we do Omni in the first placeyou know we have this great cloudservice why are we doing this thing thatisn't in the cloudum and really the the first use case iscustomers who have a big Fleet of Legacydatabases on-premises you know 5000Oracle databases 10 000 SQL Serverdatabases they want to move off of thosedatabases but they're not ready to moveto the cloud so they can't get to thegoodness of ledb in the cloudbut they want to move off and they'renot ready to get to the Cloud so we'retrying to give them basically anEnterprise grade postgres withEnterprise grade support and that'sreally where Alibi Omni fits is in thatspace where customers have workloadsthat aren't ready for the cloud but areready for a higher end postgres so I'mgoing to hand it off to Simon becausehe's going to do his our first demo ofthe day all right thanks Kevin and canwe switch please at the back to the democomputer so I get all the excitementhere because I'm going to do some livedemos and I'm actually doing them alllive I'm going to do some in GoogleCloud here and then later in AWSso I'm actually going to just open upthis is my own personal Google Cloudaccount onyou guys can turn to each other now andmake bets as to whether the uh yamos aregoing to fail or not I like to live onthe edge with live demos and I'mactually going to paste in a commandreally quickly to start it off becauseit takes two minutes to run and then I'mgoing to explainwith what exactly is happening in mycommand so here's my command I'm goingto try to copy it I'm going to try andpaste it here into my cloud shellif you first thing went it worked ohclose to working and there we goso what am I doing here wellwhat I'm doing is a really quick startto get alloy DB Omni up and running so Ifirst started it about using it aboutsix months ago when did the firstpreview come out March 29th March 29thokay and even season DBA sometimes are alittle bit confused about the wholecontainer aspect on running in Dockercontainers and really what I want toemphasize is it's really simple to getstarted the reason I wanted to paste thecommand here is because it takes abouttwo minutes and to end and I thinkthat's pretty impressive that we'regoing to go from nothing oh that wasn'ttwo minutes well that's only because allwe did is so far is provision Some Cloudinfrastructure so if we hit refresh whatI did here is I just used a Google CloudAPI command the gcloud command toprovision a virtual machine and youdon't have to do this in Google Cloudyou could do this on premises usingVMware I do it using Kickstart files andthings like that I just provisioned somevery simple infrastructure and then Ijust went to the alloy DB quick startdocumentation here and you can go hereand there's some very simple steps so ifanybody in your organization or youpersonally are not very familiar withDocker and containers and it adds alittle bit of a level of fearuncertainty and doubt it's very easy toget past that all I've done is reallytake all these very simple commands Icopied and pasted them into a startupscript and really that's what I did inmy command over herelet me just switch backthe other tab is really all I did iscreated a new VM and I passed into therea name of a startup script and it wasrunning so yes as Gabe pointed out themachine coming up happened very quicklybecause Google Provisions theinfrastructure very quickly and now Ican connect to it and what's happeningin the background is all I did was cutand pastethose commands as I said into a startupscript and it's going to install Dockerfor me download the container and reallyget everything up and ready to goso now we just wait a little bit as weconnect to the terminal and this is anice part about Google Cloud by the waythe fact that you don't have to have aterminal client you could just ssh indirectly from the cloud consoleand how long has it been has it been twominutes oh let's find out oh yep it hasbeen it's all done so what I see here isthat it's downloaded and it's got aninstallation directory it's called adata directory it's also created andit's done and I actually augmented theinstructions a little bit to buildmyself my own little readme file and ifI take a look at my readme I give myselfsome quick notes of how I can connectand I can just highlight that and pasteand there we gota-da I mean toOmni already so that was less than uh acouple minutes and I went from zero tohaving everything provisioned and againI'd like to emphasize you don't have todo this in Cloud Google Cloud usinggcloud commands there's lots of otherways where you can do something verysimilar to spin it up really quickly foryour devsand each iteration this is gettingeasier and easier to do so like the techpreview was a little funky you had torun the docker commands to get the thestuff this is now the next level theseinstructions include with it now acommand line tool that lets you just doserver install and it does it and it'llkeep getting easier as we iterate so onthat I'll turn it back over to you untillater on yeah and yeah like Gabe wassaying one of the things we launchedyesterday is a CLI do you want to switchplease yeah we switch back to the slidesthanksum so that now there's a CLI to makeeverything that that Simon just showedyou even easierum because he had to type in a lot ofstuff into scripts and now you can justuse the CLI commands and it's a lot lessless effort and less complexity andthat's all documented in the doc the docupdate we dropped yesterdayum so what's our next use case well it'son the edge and what do we really meanby Edge this is kind of a bunch of subuse cases here so for example telcostelcos need to have databases very veryclose to their customers in a lot ofcases they install racks and closets andon customer on company premises becausethey need real low latency for the usersusing those databases they've been doingthis for yearsand they've been doing it with Legacyexpensive databases and they want tomove to an Enterprise postgres withEnterprise supportum so Alabama is a really good fit forthat use case now the use case is whatwe Loosely call retail Edgeso there's lots of retailers out therewith lots of stores and they've beenrunning databases in their stores foryears for similar reasons they need thestores to keep running even when theylose connectivity to the Internet sothey all run local databases everywherethey're never going to move those to thecloud because they just need to stay upand running even when there's a floodand they lose connectivity but stillhave a local generator to keep the poweron in the store that's an example thatwe've been given several timesand other other examples that aren'teven on the slide that that came up morerecently manufacturing on the factoryfloor they run databases on the floorbecause they can't afford to have theassembly line stop when they loseconnectivity so there's a lot of usecases like that where customers wanta database that runs locally trulylocally they can't they cannot movethose to the cloudand so I'm going to hand it off to Gabenow for another demo back to the demolaptop please so the business use caseson the edge are greatbut what if I just want to use it on theedge or what if I'm at Moscone yesterdayand my internet goes completely kaputand and what if you're I would like tocontinue using a database and what ifyou're a developer who just yeah so I Iwill what I would like to show you nowis um I have I'll make sure it's stillkind of going hereumon my laptop in a virtual environment Ihave installed alloy DB Omni similarlyto what Simon had showed us all thesteps so now I have it running locallyum so I want to show you real quick thatI have the 192 so you know that this islocaland I would not create all these tablesof my own volition so you know this isledb Omni because it has all of the allof the the tables built for you so thisis now running locally on my laptop andI have a little script here that is Icall it the faker script it generates aa fake data set ofum employees at a company so just toshow you like right now I've got 13 14rows 13 18 so the script that I justfired is currently adding rows to my mydatabase so what I'm going to do now I'mgoing to make sure I'm going to pull thecorrect thingI'm going to disconnect my internetI have just pulled the cable off thecord and to show you if I try and gosomewhere I have no internet but you'llnotice I'm still running against thedatabaseand if I can get back to itit's still adding rows to my databaseso there's nothing connected about ledbOmni it's running completely locallythere's no internet it's only on mylaptopso no matter where you are even if youbecome disconnected you can run againstaloe to be on meslides please and hand it back to Kevinyeah and just one point on that yeahthere's no connectivity there's no phonehome built into Alibi Omni today we doplan to add capabilities over time thatwill make it useful for you to connectto back to Google cloud in fact in thepublic preview we've already addedsupport for connecting your ldb instantldb Omni instance with vertex AI so youcan actually connect it back into thecloud and use vertex for inference andother fun stuff can we switch back tothe slides pleaseall right so the third use case we wantto talk aboutis multi-cloud got lots of customershave lots of workloads running inmultiple clouds they either builtdifferent application Stacks indifferent clouds because they neededcertain special capabilities onlyavailable in that cloud or they acquiredcompanies over time with differentstacks and different clouds and theywant a common database running in allthese clouds and they want to Commondatabase that has the capabilities thatldb Omni has and so they can have youknow one standard way to support all ofthese workloads and so Omni runs thesame way on all these different cloudsit's the same code it's the samepostgres compatibility it's the samecolumnar engine it's the samescalability it's the same autopilotcapabilities the same everywhere and sothat's been really appealing to a lot ofcustomers we've talked to and so nowSimon's going to give us another fundemo yeah he needs to run through someslides did you notice my colleaguealmost sabotaged me there because heforgot to plug the internet back in Iknow it works well without internet uhnot the AWS demo part fair enough rightso it doesn't work without internet soluckily I caught that so as partnerswe're asked to do all sorts of thingslike moves migrations to the cloud andunderstanding how customers helpingcustomers understand how they canleverage new features or increaseperformance so what I wanted to do nowis set up a more complicated andinteresting demo where I'm going tosimulate running alloy DB Omni andAurora in AWSso what I want to show is that reallythis is easy okay we don't need to doanything special we can install Omniright into an ec2 instance in AWS justlike I did in Google Cloud on a virtualmachine there and the reason we mightwant to do this is to test some of theunique features that loadb brings sothis is a diagram I drew which I thinkwill help everybody understand what I'mabout to do when I go to the terminalscreen so really my architecture is thisI have one ec2 instance and I'm about toterminal into it if the internet cameback after that Dave's demo thereyesterday that's good you tested it okaybecause if the internet came doesn'tcome back it's not going to be a verygood demo so I'm going to tell I'm goingto terminal into that one ec2 instancewhere alloy DB omni's already runningthat's my local database and then I'mgoing to also connect to an AmazonAurora which I created earlier and I'mgoing to actually simulate some datacoming across and testing some of thenew features of alloy DB Omni so I'mtrying to make a very realistic use caseand I didn't want to use is just thestandard PG bench data which is veryartificial and everybody knows and maybesome people like so another colleague ata totally different presentation usedthis thing called the Chicago dataportal because he was from Chicago I'mnotum but I love Chicago I was just inChicago and it's a it's a fantastic Citybut it they expose very large data setall sorts of different things and what Idid to prepare this demo is I just lookfor business licenses and I'vedownloaded the business licenses tableand I downloaded it the other day it'sconstantly being updated and I put itinto my Aurora database and the use caseI'm trying to simulate here is maybesomebody's opening a new business andthey want to run a query to say whatother how many other new businessesopened in the last 90 days in my ZIPcode now sure that's not a necessarilyan analytic query but still I'm going toturn on the columnar engine afterwardsand we can see some of the advantages socan we switch to the demo computer nowpleaseall right so let's see if the internettruly is back otherwise it won't be toomuch of a demo all right it's back so asyou can seethis green prompt is that ec2 Amazondatabase that I showed in theillustration a second ago and what I cando here is I can connect and I'll firstshow that I haveOmni installed locally so whenever Iconnect and I use localhostI've connected I've pre-created adatabase called Chicago because that'swhere my table is going to be in theChicago data set now Gabe showed us allthe tables there and he said he didn'tyou know somebody's not going to emulatehaving all those tables or views andthings like that to uhconvince you that we're really runningagainst Omni I'm a little bit moretrusting so I would usually when Iconnect just look at what users existand I can see there's an alloy DB adminuser and a replica user or I can look atwhat default databases exist and we cansee again we got alloy DB admin sohopefully from that that's good proofthat whenever I connect and I uselocalhost I'm connecting to Omni now theother thing too as I said is I have anaurora instance now AWS gives you verybig long endpoint names so to makethings a little bit simpler for myself Ijust put that in a variable yeah sothere there's theAurora endpoint but I can connect to itby just using this variable so let'sjust test that make sure that works aswellAuroraand again I'll use the same techniquesif I look here and I look at the users Ican see I have RDS admin and replicationand so forth or I can look at thedatabases and I can see that there's anRDS oneso hopefully I convinced you thatwhenever I connect with the Aurora I'mconnecting with the dollar sign Auroravariable I'm connecting to the Aurorainstance and when I connect as localhostI'm not I'm connecting to Omni so let'sjust go into my scripts directory hereand the first thing I want to show is Iloaded this table and I loaded it in uhthe 11 million or so rows and let's justdo a quick query on the Aurora site andsee how many rows are actually thereshould have given a variable that was alittle bit easier to type like justdollar a maybethere we go okay so we have a nice easynumber to remember there's three onesand it ends with 88. that's how many areon the Aurora side now let's see have Icreated my table even on the alloy DBside or just the database well we canjust change this connect to the Omniside and take a look nope the tabledoesn't exist so what I have running inAurora is I have logical replicationthrough PG logical and if you don't knowuh postgres replication that's all rightthat's not really necessary for thisdemo just understand that postgres canprovide logical replication in near realtime to any number of targets so in thiscase I've pre-configured that on theAurora database now to start thereplication I need to actually createthe empty table here on thealloy DB Omni side so let's just do thatlet's just create the tablevoila and now let's just test again thetable exists and has zero rows so all Ihave to do to start copyingthrough replication some of my live datathat might be in my AWS Aurora into mylodb Omni because I want to experimentthere is just create a PG logicalsubscription so first of all I mightwant to just test in Aurora and makesure my table has been added to myreplication set that's just the list ofwhat tables are going to be replicatingand of course in a real use case you'regoing to have tons of different tablesbut for me I just have this one businesslicenses that I downloaded and all I'mgoing to do is simply add it toa subscription on the Omni sideso let's do thatwe'll just saygreat subscription and this is a goodtime to bet with your neighbor if demosare going to fail or notokay so we created a subscription andnow let's just see if the rows cameacrossmight take a second or two so we doaccount right now and it's zero so noweverybody hold your breath if I do itagain is the data there nope not lookinggood for the demos oh a few there we goa little a little bit worried there thatit took a second and is it replicatingjust once or is it doing it in real timewell we can go and we can add a row backso actually let's just connect in inpsql and manually add a row so if I justdescribebusinesslicenses again I should have picked atable it was easier to type I thinkthere's only twomandatory columns but I can't seem toscroll up but that's all rightinsert intobusiness licensesID and licenseID values and we'll just call this demoand 9876okay so we inserted one row let's doublecheck we're on Aurora hereyes see the RDS users we're on Auroraand again if we check now against Omniyes you see we're up to 10 ends with 89.so the rule came across so that's allgood so I just showed that it's veryeasy to copy your data in near real timefrom Aurora to Omnibut why would we want to do that well wemight want to test some of the newfeatures right so let's say I have thisquery that I mentioned I want to knowwhat business is opened in my ZIP codein the last 90 days andoopsokay so there's this query and I justwant to do an explain on that to seewhat the performance is so first let'sbe let me connect to Auroraandmake a Baselinedisplaying queryokay so that told me down the verybottom here that the execution time was266 milliseconds that's pretty quick butthis is just for demo purposes maybe inyour real environment it's an ordered ortwo orders or three orders of magnitudemoreand let's run it a couple times rightjust so that we can warm up caches andstuff this time a little higher 353 292266. so we get an idea it's close to 300or the high 200s so the first thing Iwant to do is try the same test againstOmni so let's collect connect tolocalhostand let's do explain all right so we gotsomething pretty similar well we expectit to be kind of similar because thesize and shape of my Aurora and my ec2are the same size but there's probablyother differences but we're getting inthe same kind of ballpark we're on the300 milliseconds so the last thing Imight want to do is enable the columnarengine and see what kind of differencethat makesso to do that I just have a add CEscript and it only takes 10 seconds hereit's going to show you what I did all Idid is I said I want to mark this tableto load it into columnar memory as wellI said 10 seconds there we go 10 secondsalmost 11. and now let's just rerun thequery and see what the difference isall right seven right so you see Idropped from 300 milliseconds to sevenmilliseconds let's do it a couple timesjust to make sure it's consistent yousee 6.8 6.9 6.7 soend result there is sure there's lots ofdifferent ways you can tune a query youcould add indexes you could restructureit but if you have a package staff maybeyou can't do all of those things so Ijust wanted to experiment here and showthat by just enabling the columnarengine and loading this one table intocolumnar memory and not doing anythingelse I seem to have gotten about a 40times increase in performanceso there you go the demo was all workedeven though I was almost sabotaged[Applause]if we go back to the slides pleaseyeah and a couple key points about thedemoum Simon didn't even you know do itefficiently because he loaded the entiretable all the columns into the columnarengine he only really needed the columnsthat were in his query to speed up thequery so he could have gotten you knowmore precise but really the right way todo this at scale is to turn on theautomatic management of the data drivenby ml looking at your query patternslook at your data it will automaticallyput the right Columns of memory for youso come back next year and the demo willbe improved right yeah well yeah so soyou know there's there's more to it andand he could have turned all that on itjust takes a little while for thatengine to learn your query patterns andthen start loading data so to do a demowe usually have to force the data inearlyum let's move some slides okay so I wantto talk a little bit about Sport andpartners I mentioned earlier that we aregoing to provide full support once we'reGA but to go from Tech preview to publicpreview what we've also done is inaddition to continuing to supportum Ali DB Omni on our Discord serverwhich a lot of that is Gabe and his teamanswering your questions on the hashtagCloud databases channel in Discord wealso will respond to support cases so ifyou have a support account you file asupport case about a question or issuewith LGB Omni we'll do a best effort youknow response we're not followingsupport slos yet because it's publicpreview it's not a supportive productbut we will do our best effort to starthelping customers from supportand the partners we have you know inaddition to pythian and they're a greatpartner we've got a whole bunch oflaunch Partners lodb uh Omni publicpreview launch Partners who have rampedup on how to help customers with ldbOmni how to help you with pocs and andtesting and moving workloadsum you know and pythians of course rightthere on the slide but there's you knowthere's there's a big world out thereand there's a lot of Partners a lot ofcustomers need helpum so I just want to you know say heythese these These are the partners whoare ready when you have questions aboutwhat what you can do with how to be Omniand then other things we've added we'veadded postgres 15.2 when we launched thetech preview March it was still 14.4 wemoved it to 15.2 and when we go ga wewill just support 15.2 we're not goingto support the old uh postgres 14version at allum this matters to some people who payclose attention to what the postgrescommunity adds in the new major versionso from 14 to 15 they've added a bunchof new cool stuff that's all availablein Omni since it is 100 postgrescompatibleand then I mentioned this earlier wejust yesterday morning we published aset of detailed technical guides on howto implement various data protectionscenarios how to do backups how to doturn on replication like you saw Simondo but trying to replica replication formore complex use cases like ha andfailover and Drso there's a bunch of detail guideswhich once we go ga we will provide fullsupport for those guides as well thoseguys do depend on open source tools andfeatures we'll be fully supporting uhany any problems you might run into withall of those capabilitiesand then we've also added a support forour enhanced PG vector and integrationwith vertex AI and you probably haveheard a lot about these especially ifyou saw the allodb session yesterday orAndy gutman's Spotlight sessionum these are analog to be Omni and in ofcourse an LGB Cloud as well so you canbuild gen iops right now on Ali to beOmni on your laptopum if it's connected to the cloud youcan use vertex AI as well but you canuse PG Vector even on your laptopdisconnectedand one thing that isn't on the slide wealso just yesterday launched a separateTech preview so it's an earlier StagePreview of valid to be Omni with localembedded models so it's kind of likeworking with vertex AI but you don'tneed to call vertex AI there's a couplebottles we've embedded in the localdownload of omni so you can actuallytest those capabilities without evenbeing connected to the cloudand like I said we're not going to talkmuch about pricing other than we'resticking to what we committed to back inMarch and make a simple transparentaffordable and we will continue to havea free Developer Editionso that is available now and it willcontinue to be available when we go ganow I'm going to hand it back off toSimon yeah and lastly if you're juststarting out and your organization isinterested in getting going withpostgres in Google Cloud we offer a freeno cost to you one day workshop wheresomebody like myself can work with yourtechnical teams either remotely or onsite to go through your migrationjourney to really it's kind of theopposite of here we're all coming to SanFrancisco and getting sessions this isthe opposite where all the sessions cometo you including a lot of Hands-On labsand actual Hands-On keyboard stuff andcollaborating and brainstorming onmigration paths so if that's of interestto you and you're just starting yourjourney reach out to us and we couldmaybe arrange to do a free Workshopand to that end like the first thingthat we want you to do is go try it grabit it's easy to use just go to thatquick start page get started download itand play around with it during thispublic preview right now before we'retalking about pricing it's free to useso get it play with it kick the tiresgive us feedback and let us know whatyou like what you don't like so we canmake improvements as we go the last bitbefore they kick us out uh please do dothe feedback on the session in the appgo through let us know what you likedwhat you didn't like if you want bettersessions the next year this is the wayto get themand with that thank you very much forcoming for our session we are out oftime but we'll we'll meet you outside tochat if you wantforeign"
}