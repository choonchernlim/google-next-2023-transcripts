{
    "title": "Demystifying cloud migration and app modernization with Datadog",
    "presentation_type": "Breakout",
    "categories": [
        "Architects, IT Professionals",
        "ARC109"
    ],
    "video_id": "NZfDO8f2S6A",
    "time": "Aug 29 04:45 PM - 05:30 PM CDT",
    "transcript": "foreign[Music]everybody Welcome to demystifying Cloudmigration and app modernization withdatadog I realize it's post lunch soeverybody might be a little bit tiredthat kind of thing I'm not going to getyou to stand up and do exercises oranything like that but I see someBlazers I see some shorts I'm wonderingwho's in the midst of a migration rightnow do we have anybody currentlymigrating to okay we got a couple do wehave any data dog clients in the houseokay so we got like 30 we got some datadog users all right do we have anyonedoing app modernization so taking maybea monolith putting into containers appengine okay so it's mixed kind of allover the house all rightI'm Ryan McLean if this clicker worksthere we go that is me I'm a seniortechnical Advocate at datadog I used towork at Samsung and prior to that Iworked at a company called stem cellI've done a couple migrations both onthe workspaces side as well on the cloudside I will say that I'm probably betterat monitoring than I am at migration andbecause of that there's going to bequite a bit of Google content in hereabout migration and op modernization butwhat I'll try to do is frame that interms of monitoring and tell you what'simportant and why it's important andsome of those steps that Google givesyou in terms of migrating so the mainthing that I want to talk about prior togetting started is just about datadogitself so I've got a little blurb to sayI'll try not to read too much off theslides but basically what we're tryingto do is solve complexity so datadog isa monitoring and analytics platform forthose of you who are clients of ours yetit provides full visibility across yourorganization that's spending and sothat's your front end all the way downto your database it could be in thecloud it could be on-prem as you'remigrating it can even be the network youknow the the cables basically they'reusing to migrate things to the cloud tolet you know what you are doing in termsof saturation your metrics but the ideais to enable everyone that's Ops that'sDev that's even the business to see fullvisibility into what's going on intoyour digital uh Enterprise so whatyou're doing on-prem what you're doingin the cloud let you know what'sactually happening so to put it simplydatadog exists to solve complexvisibility problems and for those of youdoing a migration I think you know thatactually making sure that what you'vegot in terms of the experience on-premand what you've got on cloud are thesame if not better hopefully it's reallyreally key in terms of your success sowhat you want to measure is that whenyou migrate things over that things areeither better or or like uh or moreefficient basically so what we're tryingto do is give you a single platform forall your observability needs all rightthat was a blurb we'll try to talk alittle bit about my experience going onthere's a big quote up here if you wantto take a break and read through you canfor those of you who don't want to readI'll I'll make it pretty easy so againfor the the suits in the crowd the mainthing here is that we need buy-in andusing that buy-in we can foster thismodernization and migration effort whenyou have something that's from the topup like that it actually makes it a loteasier for people like me I used to bean office engineer for about 20 years itallows me to say hey you know the VPsaid this CEO said this let's all getunder this one goal and get into thecloud now it doesn't need to be all atonce it could be piecemeal one at a timeit could be Greenfield it could beBrownfield it could be something thatyou're looking at in terms of Legacytrying to migrate over the main thing iswith that stakeholder uh basicallybuy-in for you to allow you to do theseefforts and start to migrate up allowsyou to make it a lot easier basically sowe're going to start with the simple oneso we'll start with Cloud migration soCloud migration is kind of a big topicyou might also hear digitaltransformation kind of roped in theredepending on who you're talking to themain thing is what you're trying to dois migrate possibly from Cloud to Cloudmaybe it's from on-prem to Cloud maybeit's from The Edge to the cloud dependson what you're actually doing but themain thing is figuring out what you'vegot currently prior to moving it is themain big step here there is a workflowhowever and most of this content so thatthis awesome graphic is actually kind oflifted from Google stock so Google has amigration Center that if you haven'tseen would highly recommend looking atit and in fact in that platform in thatthat portal a couple tools that arereally good one of them that stuck outto me was mfit I haven't used that toolI'll use something similar when I wasworking on it but it'll allow you to goin and look at something like yourVMware and say hey what's in here that Ican easily migrate into Cloud run heywhat's in here that might be able tomigrate into containers what can I puton eks now these five steps they kind ofgo left to right but honestly thereshould be an arrow coming back to thebeginning because what you want to do iscarve off little pieces and using thoselittle pieces you're going to learn fromyour success and then come back to itand say hey the lessons we learned lasttime was maybe we should have like ablue green deployment for this orperhaps we should migrate only like 50of our users or 10 of our users or maybewe need to measure thing a little bitbetter than we did last time and usingthose little steps when it comes back todo it again it's a little bit easierit's kind of like washing your hairright the instructions on the shampoosay rinse lather repeat now there's noend to repeat for those of you who arein the middle of migration projectssometimes they can last years thelongest for me has been three years hasanyone gone over three years in theaudienceokay no one wants to raise your hand itdoes happen I think the average is aboutsix okay so going from there I think themain thing is I'll keep it short but Itook those first two steps and kind ofstuck them together so I I'll leave outthe estimation well let's let's assumethat we're going to do that there firstbut what I'm going to do is combine thediscovery and assessments phase and atthe end of the talk I'll Circle back tothese steps just so we talk about likeonce we talk about the all the stepsthat we want to do what what was the BigGoal what's the big takeaway now forthose of you who haven't started I thinkone of the easiest pieces of deviceslike the sooner you start the easierit's going to be at least starting withmeasurement is kind of the main one butthat's part of that discover phase solike have a plan know before you go thatkind of thing so assess what youcurrently have your digital estate sowhere do you have things deployed what'sthe most important to you is it like areyou going to take the big businesscritical app and move it first are yougoing to do that Greenfield deploymentput it right into gke and start off withkubernetes Native it depends on whatyou're doing in your environment it alsodepends that the risk and the risktolerance that your health so if youwant to move your Erp over which is whatI did might not be the best idea howeverif you've only got like one databaseserver and it fails and your companygoes down maybe that's a big risk soeven though it's risky to move it it'smore risky if it goes down and yourbusiness stops so it might be thatthat's what you want to look at and itcould be like a lift and shift I knowthat's kind of a dirty word depending onwho you're talking to it could be a moveand improve which is sort of the way ofsaying the same thing so you take maybea VM you take it from VMware and you runit in VMware in gcp and maybe from thereyou start whittling down what itactually does but then you've got twocopies instead of ones you're actuallycovering your basis which is great sothen the next thing is having that planand then executing the plan and thengoing back to your discover and assessphase for the next app that you're doingbecause chances are it's not just onething but once you've done one it makesthe next easier repeat repeat repeat Ithink at the end of this you're gonnahave like really clean hair right on theshampoo bottle it doesn't say stop justkeep repeating all right so we'll go tothe next one here but the next part isthat prep so when Google talks aboutprep they want you to make like a listbasically saying here are all the thingsthat I have here are all the things thatI want to migrate on the data dog sidewhat I would want to know is what is theuser experience what is the operationexperience what is a Dev experience soif I migrate something over to the cloudand I've got CI CD pipelines on-premthat point to on-prem servers well thenext time I do a deployment do I deployto two locations do I deploy to onewhich one do I do what does that looklike what's a cut over that kind ofthing so that's what I mean when I talkabout preparation but they're similarthey sort of dovetail together so when Italk about it and this is honestly it'sa bit of an eye strain I realize thatthere's a lot of points on here but themain thing I want to say you don't needto know what's on this but on the lefthand side is your source and your righthand side is your destination that'ssort of the big idea now in this casewe're migrating and modernizing at thesame time that might not work foreverybody it could be something that youwant to to do at the same time so maybeyou've got a monolith on-prem and youwant to start carving off littleservices like a calendar service abooking service maybe you're Outsourcinglike an email service something likethat you can start carving those piecesoff but in some cases it might be easierto do it to do that lift and shift orthat move and improve first and thenstart covering them off in some cases itmight be maybe it's something you've gotin the dev environment where the risk isreally low and doing all of this at onceisn't a problem it really depends onyour organization you're going to hearthat a lot that's a typical engineerresponse right it depends but really itdoes depend on your business your risktolerance and your priorities so what'smore important to your business what doyou need to get done sooner what areyour fiscal goals quarterly goals what'syour one three five year plan how doesthis fit into that that mix so again bigchart left hand side we got the VMSright hand side we got kubernetes soessentially as you're moving from yoursource to your target what you want isif we're to think of these about bucketsbasically so you've got like a waterbucket here and a water bucket here youwant this one to go down and this one togo up I'm trying to trying to line themup here so you want less VMS and morecontainers kind of what you're going atnow keeping that in mindthat's kind of like the Ops approachright so we like to think about networkswe like to think about storage well Ithink about CPU memory that kind ofstuff but honestly when it comes to thebusiness users what they care about isis my app running like uh yeah thewebsite's up that's cool but thewebsite's serving a white page that's Imean it's up but I can't really doanything so for me that doesn't reallyhelp and sometimes what it can be isactually looking at your app and tryingto figure out what those dependenciesare it could be a dependency map we'vegot a tool that can do that for you butit could be that actually just runningan inventory through what you got a newdigital estate can be that first stepfor you so for example I'll talk a lotabout State first approach that mightnot be the approach that you want butwhen you think about what you're storinggenerally what's important what you'reactually storing in terms of data iscritical do we have it backed up we havea Dr plan like a disaster recovery plando we have maybe a BCP plan like abusiness continuity plan what do youhave in terms of a priority for thisapplication when you move to the cloudis it just that you've got two regionsand then your cover kind of thing itreally depends now when we talk aboutmigration I like to think about this asa day ones when we talk about deployingapplications we might think of day Zeroas planning day one is deployment daytwo is Operation and then depending onwho you talk to it might be day 100 orday 500 it could be that governance thatmanagement that security kind of aspecthopefully you're thinking about securitythis whole time but like that's when itcomes in like when am I doing my auditsthat kind of stuff down the road when itcomes to app modernization and migrationon the migration part that day one isgoing to be your actual migration sowhen we're in day one similar to aregular deployment we have a lot ofconcerns now the concerns for yourmigration might be something like howfast am I moving my data or how longdoes it take for me to move it upthere's a bunch hopefully you can readthese here yeah so this is a stateversion post but it's like if I've gottwo terabytes of data on-prem what doesthat look like in the cloud in terms ofhow long it takes to go there when I wastalking about the buckets before it'sthe same sort of thing so if I've got abunch of stuff on a filer or maybe a Samor maybe just some raw discs sittingaround on Prem or maybe it's in adifferent Cloud how long does that taketo come over when do I say that it'sdone and what does that look like now astate first approach is what I'm talkingabout here again not recommended foreverybody but I'll give you a quickstory about an Erp that I was moving sothe Erp used a database on-prem and itwas in one of those compact Reliant kindof beige boxes just sitting on a serverrack I see some smiles and knows hereI'm so sorry if I'm giving anyone PTSDbut when I looked at it having recentlyjoined the company I realized hey thisis a single point of failure and thisruns the entire organization this is aproblem so the question was hey we havedatabase backups and can we restore themand the answer was yes we have backupsno we've never tested them so that firstthing for me at least was looking atthat state state for me was the databaseState now for you again it might be yourfiles it might be something like you'vegot other little pieces of data here andthere that actually run that sorry it'son the camera mode something in theorganization that you need to migrate upbut what I want to say is when you thinkabout what's important to the companyyes the app's running but two are westoring the data that the app is servingor when I modify things is it writingback and the reason why I say this isimportant is this is kind of those thesort of Drop Dead events so if you loseyour data this is a problem if youhaven't migrated that data over if youdon't have backups that you tested ifyou're not backing up to the cloud orrestoring from those backups in thecloud the question is what are you doingabout that state the reason I'm sayingit this way is if we think about this asa triangle the state's kind of on thebottom so it's what props up your wholeapplication so again if that web pageloads and it's white chances are it justdidn't get the data that it needs nowthe second is that key app so when we'retalking about my experience that key appwas Erp in this case it was a databaseserver and a front-end server one ofeach pretty risky pretty big deal if itwent down so for us our first questionwas hey can we have a backup in thecloud that we can use as a businesscontinuity sort of exercise maybe we canhave a failure Friday or once a quarterwill fail over and see if it works andwe started that way it's sort of justlike a backup server to see hey whenthis happens what works and when we'redoing these plans and doing these testswhat are we measuring so for us it wassomething like order entries so how longdoes it take for us to do a generic testcase order entry now I hate to say itagain it's like someone who's a DeVospractitioner I was doing all thismanually in my defense this is back in2008 so you know that things have gottenbetter at this point in time but what Ireally want to say is as you're definingthese tests for these applications whatyou want to do is say hey this hits endto end so it has a user entering anorder that order goes into the system Ican prove that it's there and then ontop of that when I go to read the orderI can show that it actually work nowthese days what you probably want to dois sort of wrap this so it could besomething like Ci CD I've seen peoplewho use and have used CI CD for thiskind of test if again the data doganswer might be something aroundsynthetics so if you want to do like anend-to-end test it simulates this aspart of this test we do it but also youcould write like a test harness aroundit too it doesn't necessarily need to bethat complicated it could also be one ofthose checklists like I was talkingabout before and we legitimately hadtimers that we were using to see hey isthis faster is it not faster that kindof thing it's okay I think the mainthing is taking the approach that you'vegot that you know and starting there thesooner the better as opposed to waitingand taking it longer all right somonitoring right so when we're doingthese test case end to end what doesmonitoring look like for our migrationuh I'll talk about networking a littlebit here because I think a lot of peoplewill discount the importance maybe ofnetworking and as a former networkengineer I guess maybe that's one of thelenses that I use when I think aboutmigration so you probably have uhhopefully one internet connection maybetwo back up into your next connectionyou might have like a vpls mpls thatkind of thing so some sort of privatenetwork connection to your cloud ormaybe to your sites but the unfortunaterealization for us was even thoughyou've got this really fast link there'slatency that comes into play but as wellas where you're Landing in the landingZone in Google needs to actually havethe bandwidth for the resources thatyou're getting to get the amount thatyou're sending to it what I'm trying tosay is like if you're moving into aninstance maybe the instance has i olimitation or an i o ceiling they'll sayHey you can write to a disk this fastyou need to make sure that you can writeto the disk as fast as you're sendingdata to it in order to make sure thatyou're getting Ro why on that pipe thatyou just purchased to make sure you canmigrate faster so don't don't just thinkabout one side of that equation we werelooking at a page before think about theother size as well when it comes to youryour actual uh your monitoring of thething here so I'm going to start withthe easy one so logs traces and metricsI think are pretty important uhdepending on who you talk to they mayhave put those in all three of these sologs traces metrics here uh for me whatI'd like to say is that's kind of tableStakes so when I talk to you about CPUmemory disk IO that kind of thinggenerally your business doesn't careabout that too much when I talk abouttraces like code performance that kindof thing your devs are going to care forsure you'll want to know hey I'm movingto microservices and the monolith therewas no delay between my service why isthere now like a one millisecond delayevery time I make a call what can I doto make that better or maybe I've movedto a new database engine and I'mnoticing that the sizing could be alittle bit better the traces will allowyou to actually drill into that and showyou what slow what's not so fordifferent portions of your code now theimportant thing for me I guess and youkind of got it is like the networktesting part but the end-to-end testingand I'm mentioning synthetics herethat's really really important so Italked about order entry and that waslike in an Erp if you're runningsomething like uh an e-commerce servicefor example or like a WordPress serviceor something where you're doing crudoperation so you're entering data thenusers will read that data they mayupdate that data and then delete thatdata so those credos create read updatedelete those things are easy testsactually so hey I've just restored mydatabase I just put the web front end upthere I've got a new cache but what Iwant to do is test hey can I create anorder create a blog post can I read theorder that I just created that can Iupdate it can I modify are thepermissions correct that kind of thingis a firewall okay and then can I deleteit or maybe you want to try to delete itand fail so you're testing permissionsthat kind of thing but at cred testSuite even though it seems really reallysimple and you might even already haveit in test harness you can reuse that asa post-migration test or even apre-migration test and I say thisbecause at one point in time ourdatabase was locked and we tried to dosomething and then we realized like heyit's not working let's see if it worksover here and it turned out there was aproblem that we had on both sides it'sjust that we hadn't tested it on-premprior to testing in the cloud it's justmore of a user era error sorry so as wewere trying to do two things at once themain thing that was important wastesting both sides of the story allright and then I talked a little bitabout Ingress and egress but reallynetworking when it comes to moving a lotof data or maybe moving portions of dataand keeping a web server over here thatIngress and egress are going to bereally important to you on the networkside if you haven't heard these termsbefore that's okay so in grasp meanscoming in egress means leaving so datacoming into Google for example yourmigration Target or data leaving Googlein fact so let's say you've got like aweb server on-prem using a caching layerbut you're talking to Google maybe thategress from Google is something that youneed to worry about as well all rightI'm almost done I promise we'll keepthis really really short we don't needto talk forever I saw some people leavealready so if I'm already boring youit's almost done I promise the lastone's going to be optimization now thisis really an eye test I will say thatthis is on the migration site but I willwalk through this for you so the mainthing is we're going to start this Loopso for those of you can't see at the topleft is we're going to start the loopand the reason I say this is becausewe're going to Loop through it multipletimes just like that washing the hairexample so we're going to go through theloop we're going to say hey what's yourcurrent environment what is what are youcurrently doing on a day-to-day basiswhat really makes sense in terms ofusers so let's say that order examplethat we're talking about takes maybefive seconds so that that baseline orthat low water mark for you is hey whensomeone enters an order it shouldn'ttake longer than five seconds or maybenot much longer than five seconds and asyou move on you're going to look at likehey what about our environment like howmany VMS do we have how many servers dowe have how many front ends do we havethat kind of thing and it seems prettysimple but actually having an inventoryof what you're doing is really key whenit comes to moving to the cloud now itcould be that you're not using taggingand VMware I know a lot of the shotsthat I used to work with weren'tnecessarily up to date on their tags butthis might be a good opportunity for youto say hey these are all similar webservers we can tag them as we move andthis could be one of those movingimproves so we're moving stuff up fromVMware to VMware in the cloud with gcpbut perhaps this is a good time to tag Idon't know just saying and the next isassessing your team so like if you'vegot a bunch of teams that are alreadydoing work and you decide hey let's justthrow some migration stuff on top ofthat it's going to be okay it might beworth thinking about planning this outas a regular project and carving offsome time for your teams it could bethat you want to reach out to Google tosee if they can help and in my case whathappened was they were actually able torecommend a partner that I worked withand using that partner was actually itwas kind of like a super skill you knowwhen you get a really powerful sword ina video game or you'll learn a new moveor you've like got a new trick andyou're like hey this is amazing from methat felt like a superpower we had apartner that we could rely on thatreally helped us deal with management aswell as talk about what we needed interms of migration all right and I'mjust going to go to the last one herethat the rest of these would takeforever if I got through them and thenthe next is assess this Loop so oncewe've gone through this one time what wewant to do is say which one of thesesteps was the most impactful for us andwhat can we do for it now on the datadog side for monitoring obviously themain thing for me is making sure thatend to end for you is still working butalso that you're doing things likemigrating maybe over to maybe moreDynamic infrastructure so on demand asyou get a lot of traffic maybe you wantto be able to sprawl out or perhaps it'sinstead of manually creating serversyou're starting to move over tosomething like uhterraform perhaps palumi infrastructureas code but a way of automating whatyou're doing so you're not doing it allby hand and can start applying thesepolicies to the orc again this is in theGoogle migration Center can't recommendit enough it's great the sweat I'mframing a lot of this talk in now againback to that migration workflow so totake that big graph and sort of distillit down into those four steps because Ithink this is the easiest takeaway sowhat you're going to do isestimate discover assess plan andmigrate those big steps that you sawthere like all the arrows going aroundthose are just the big steps for allthose areasall right[Music]"
}